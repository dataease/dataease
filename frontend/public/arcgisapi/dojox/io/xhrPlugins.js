//>>built
define(["dojo/_base/kernel","dojo/_base/xhr","dojo/AdapterRegistry"],function(b,r,t){function m(){return q=dojox.io.xhrPlugins.plainXhr=q||b._defaultXhr||r}b.getObject("io.xhrPlugins",!0,dojox);var k,q;dojox.io.xhrPlugins.register=function(){var g=m();k||(k=new t,b[b._defaultXhr?"_defaultXhr":"xhr"]=function(d,e,a){return k.match.apply(k,arguments)},k.register("xhr",function(d,e){if(!e.url.match(/^\w*:\/\//))return!0;d=window.location.href.match(/^.*?\/\/.*?\//)[0];return e.url.substring(0,d.length)==
d},g));return k.register.apply(k,arguments)};dojox.io.xhrPlugins.addProxy=function(g){var d=m();dojox.io.xhrPlugins.register("proxy",function(e,a){return!0},function(e,a,f){a.url=g+encodeURIComponent(a.url);return d.call(b,e,a,f)})};var n;dojox.io.xhrPlugins.addCrossSiteXhr=function(g,d){var e=m();if(void 0===n&&window.XMLHttpRequest)try{(new XMLHttpRequest).open("GET","http://testing-cross-domain-capability.com",!0),n=!0,b.config.noRequestedWithHeaders=!0}catch(a){n=!1}dojox.io.xhrPlugins.register("cs-xhr",
function(a,f){return(n||window.XDomainRequest&&!0!==f.sync&&("GET"==a||"POST"==a||d))&&f.url.substring(0,g.length)==g},n?e:function(){var a=b._xhrObj;b._xhrObj=function(){function l(h,p){return function(){c.readyState=p;c.status=h}}var c=new XDomainRequest;c.readyState=1;c.setRequestHeader=function(){};c.getResponseHeader=function(h){return"Content-Type"==h?c.contentType:null};c.onload=l(200,4);c.onprogress=l(200,3);c.onerror=l(404,4);return c};var f=(d?d(m()):m()).apply(b,arguments);b._xhrObj=a;
return f})};dojox.io.xhrPlugins.fullHttpAdapter=function(g,d){return function(e,a,f){var l={},c={};"GET"!=e&&(c["http-method"]=e,a.putData&&d&&(l["http-content"]=a.putData,delete a.putData,f=!1),a.postData&&d&&(l["http-content"]=a.postData,delete a.postData,f=!1),e="POST");for(var h in a.headers){var p=h.match(/^X-/)?h.substring(2).replace(/-/g,"_").toLowerCase():"http-"+h;c[p]=a.headers[h]}a.query=b.objectToQuery(c);b._ioAddQueryToUrl(a);a.content=b.mixin(a.content||{},l);return g.call(b,e,a,f)}};
return dojox.io.xhrPlugins});