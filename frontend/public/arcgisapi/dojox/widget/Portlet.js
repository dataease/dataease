//>>built
define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/connect dojo/dom-style dojo/dom-class dojo/dom-construct dojo/fx dijit/registry dijit/TitlePane dijit/_Container ./PortletSettings ./PortletDialogSettings".split(" "),function(t,u,h,p,v,w,g,f,q,B,r,x,y,C,D){u.experimental("dojox.widget.Portlet");return t("dojox.widget.Portlet",[x,y],{resizeChildren:!0,closable:!0,_parents:null,_size:null,dragRestriction:!1,buildRendering:function(){this.inherited(arguments);
g.set(this.domNode,"visibility","hidden")},postCreate:function(){this.inherited(arguments);f.add(this.domNode,"dojoxPortlet");f.remove(this.arrowNode,"dijitArrowNode");f.add(this.arrowNode,"dojoxPortletIcon dojoxArrowDown");f.add(this.titleBarNode,"dojoxPortletTitle");f.add(this.hideNode,"dojoxPortletContentOuter");f.add(this.domNode,"dojoxPortlet-"+(this.dragRestriction?"nonmovable":"movable"));var a=this;if(this.resizeChildren){this.subscribe("/dnd/drop",function(){a._updateSize()});this.subscribe("/Portlet/sizechange",
function(c){a.onSizeChange(c)});this.connect(window,"onresize",function(){a._updateSize()});var d=h.hitch(this,function(c,k){var l=r.byId(c);if(l.selectChild){var A=this.subscribe(c+"-selectChild",function(z){for(var n=a.domNode.parentNode;n;){if(n==z.domNode){a.unsubscribe(A);a._updateSize();break}n=n.parentNode}});c=r.byId(k);l&&c&&a._parents.push({parent:l,child:c})}});this._parents=[];for(var e=this.domNode.parentNode;null!=e;e=e.parentNode){var b=e.getAttribute?e.getAttribute("widgetId"):null;
if(b){d(b,m);var m=b}}}this.connect(this.titleBarNode,"onmousedown",function(c){return f.contains(c.target,"dojoxPortletIcon")?(v.stop(c),!1):!0});this.connect(this._wipeOut,"onEnd",function(){a._publish()});this.connect(this._wipeIn,"onEnd",function(){a._publish()});this.closable&&(this.closeIcon=this._createIcon("dojoxCloseNode","dojoxCloseNodeHover",h.hitch(this,"onClose")),g.set(this.closeIcon,"display",""))},startup:function(){if(!this._started){var a=this.getChildren();this._placeSettingsWidgets();
p.forEach(a,function(d){try{d.started||d._started||d.startup()}catch(e){console.log(this.id+":"+this.declaredClass,e)}});this.inherited(arguments);g.set(this.domNode,"visibility","visible")}},_placeSettingsWidgets:function(){p.forEach(this.getChildren(),h.hitch(this,function(a){a.portletIconClass&&a.toggle&&!a.get("portlet")&&(this._createIcon(a.portletIconClass,a.portletIconHoverClass,h.hitch(a,"toggle")),q.place(a.domNode,this.containerNode,"before"),a.set("portlet",this),this._settingsWidget=a)}))},
_createIcon:function(a,d,e){var b=q.create("div",{"class":"dojoxPortletIcon "+a,waiRole:"presentation"});q.place(b,this.arrowNode,"before");this.connect(b,"onclick",e);d&&(this.connect(b,"onmouseover",function(){f.add(b,d)}),this.connect(b,"onmouseout",function(){f.remove(b,d)}));return b},onClose:function(a){g.set(this.domNode,"display","none")},onSizeChange:function(a){a!=this&&this._updateSize()},_updateSize:function(){this.open&&this._started&&this.resizeChildren&&(this._timer&&clearTimeout(this._timer),
this._timer=setTimeout(h.hitch(this,function(){for(var a={w:g.get(this.domNode,"width"),h:g.get(this.domNode,"height")},d=0;d<this._parents.length;d++){var e=this._parents[d],b=e.parent.selectedChildWidget;if(b&&b!=e.child)return}if(!this._size||this._size.w!=a.w||this._size.h!=a.h){this._size=a;var m=["resize","layout"];this._timer=null;a=this.getChildren();p.forEach(a,function(c){for(var k=0;k<m.length;k++)if(h.isFunction(c[m[k]])){try{c[m[k]]()}catch(l){console.log(l)}break}});this.onUpdateSize()}}),
100))},onUpdateSize:function(){},_publish:function(){w.publish("/Portlet/sizechange",[this])},_onTitleClick:function(a){a.target==this.arrowNode&&this.inherited(arguments)},addChild:function(a){this._size=null;this.inherited(arguments);this._started&&(this._placeSettingsWidgets(),this._updateSize());!this._started||a.started||a._started||a.startup()},destroyDescendants:function(a){this.inherited(arguments);this._settingsWidget&&this._settingsWidget.destroyRecursive(a)},destroy:function(){this._timer&&
clearTimeout(this._timer);this.inherited(arguments)},_setCss:function(){this.inherited(arguments);g.set(this.arrowNode,"display",this.toggleable?"":"none")}})});