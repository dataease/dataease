//>>built
require({cache:{"url:dojox/atom/widget/templates/FeedViewer.html":'\x3cdiv class\x3d"feedViewerContainer" dojoAttachPoint\x3d"feedViewerContainerNode"\x3e\r\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" class\x3d"feedViewerTable"\x3e\r\n\t\t\x3ctbody dojoAttachPoint\x3d"feedViewerTableBody" class\x3d"feedViewerTableBody"\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e\r\n',"url:dojox/atom/widget/templates/FeedViewerEntry.html":'\x3ctr class\x3d"feedViewerEntry" dojoAttachPoint\x3d"entryNode" dojoAttachEvent\x3d"onclick:onClick"\x3e\r\n    \x3ctd class\x3d"feedViewerEntryUpdated" dojoAttachPoint\x3d"timeNode"\x3e\r\n    \x3c/td\x3e\r\n    \x3ctd\x3e\r\n        \x3ctable border\x3d"0" width\x3d"100%" dojoAttachPoint\x3d"titleRow"\x3e\r\n            \x3ctr padding\x3d"0" border\x3d"0"\x3e\r\n                \x3ctd class\x3d"feedViewerEntryTitle" dojoAttachPoint\x3d"titleNode"\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd class\x3d"feedViewerEntryDelete" align\x3d"right"\x3e\r\n                    \x3cspan dojoAttachPoint\x3d"deleteButton" dojoAttachEvent\x3d"onclick:deleteEntry" class\x3d"feedViewerDeleteButton" style\x3d"display:none;"\x3e[delete]\x3c/span\x3e\r\n                \x3c/td\x3e\r\n            \x3ctr\x3e\r\n        \x3c/table\x3e\r\n    \x3c/td\x3e\r\n\x3c/tr\x3e',
"url:dojox/atom/widget/templates/FeedViewerGrouping.html":'\x3ctr dojoAttachPoint\x3d"groupingNode" class\x3d"feedViewerGrouping"\x3e\r\n\t\x3ctd colspan\x3d"2" dojoAttachPoint\x3d"titleNode" class\x3d"feedViewerGroupingTitle"\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e'}});
define("dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/dom-class dijit/_Widget dijit/_Templated dijit/_Container ../io/Connection dojo/text!./templates/FeedViewer.html dojo/text!./templates/FeedViewerEntry.html dojo/text!./templates/FeedViewerGrouping.html dojo/i18n!./nls/FeedViewerEntry".split(" "),function(h,n,u,D,p,k,r,t,v,w,x,y,z,A){h.experimental("dojox.atom.widget.FeedViewer");var l=p("dojox.atom.widget.FeedViewer",[r,t,v],{feedViewerTableBody:null,
feedViewerTable:null,entrySelectionTopic:"",url:"",xmethod:!1,localSaveOnly:!1,templateString:x,_feed:null,_currentSelection:null,_includeFilters:null,alertsEnabled:!1,postCreate:function(){this._includeFilters=[];""!==this.entrySelectionTopic&&(this._subscriptions=[h.subscribe(this.entrySelectionTopic,this,"_handleEvent")]);this.atomIO=new w;this.childWidgets=[]},startup:function(){this.containerNode=this.feedViewerTableBody;var a=this.getDescendants(),b;for(b in a){var c=a[b];c&&c.isFilter&&(this._includeFilters.push(new l.CategoryIncludeFilter(c.scheme,
c.term,c.label)),c.destroy())}""!==this.url&&this.setFeedFromUrl(this.url)},clear:function(){this.destroyDescendants()},setFeedFromUrl:function(a){if(""!==a){if(this._isRelativeURL(a)){var b="";b="/"!==a.charAt(0)?this._calculateBaseURL(window.location.href,!0):this._calculateBaseURL(window.location.href,!1);this.url=b+a}this.atomIO.getFeed(a,n.hitch(this,this.setFeed))}},setFeed:function(a){this._feed=a;this.clear();var b=function(g){g=g.split(",");g.pop();return g.join(",")},c=a.entries.sort(n.hitch(this,
function(g,q){g=this._displayDateForEntry(g);q=this._displayDateForEntry(q);return g>q?-1:g<q?1:0}));if(a){a=null;for(var d=0;d<c.length;d++){var f=c[d];if(this._isFilterAccepted(f)){var e=this._displayDateForEntry(f),m="";null!==e&&(m=b(e.toLocaleString()),""===m&&(m=""+(e.getMonth()+1)+"/"+e.getDate()+"/"+e.getFullYear()));if(null===a||a!=m)this.appendGrouping(m),a=m;this.appendEntry(f)}}}},_displayDateForEntry:function(a){return a.updated?a.updated:a.modified?a.modified:a.issued?a.issued:new Date},
appendGrouping:function(a){var b=new B({});b.setText(a);this.addChild(b);this.childWidgets.push(b)},appendEntry:function(a){var b=new C({xmethod:this.xmethod});b.setTitle(a.title.value);b.setTime(this._displayDateForEntry(a).toLocaleTimeString());b.entrySelectionTopic=this.entrySelectionTopic;b.feed=this;this.addChild(b);this.childWidgets.push(b);this.connect(b,"onClick","_rowSelected");a.domNode=b.entryNode;a._entryWidget=b;b.entry=a},deleteEntry:function(a){this.localSaveOnly?this._removeEntry(a,
!0):this.atomIO.deleteEntry(a.entry,n.hitch(this,this._removeEntry,a),null,this.xmethod);h.publish(this.entrySelectionTopic,[{action:"delete",source:this,entry:a.entry}])},_removeEntry:function(a,b){if(b){var c=u.indexOf(this.childWidgets,a);b=this.childWidgets[c-1];c=this.childWidgets[c+1];b.isInstanceOf(widget.FeedViewerGrouping)&&(void 0===c||c.isInstanceOf(widget.FeedViewerGrouping))&&b.destroy();a.destroy()}},_rowSelected:function(a){for(a=a.target;a&&!k.contains(a,"feedViewerEntry");)a=a.parentNode;
for(var b=0;b<this._feed.entries.length;b++){var c=this._feed.entries[b];if(a===c.domNode&&this._currentSelection!==c){k.add(c.domNode,"feedViewerEntrySelected");k.remove(c._entryWidget.timeNode,"feedViewerEntryUpdated");k.add(c._entryWidget.timeNode,"feedViewerEntryUpdatedSelected");this.onEntrySelected(c);""!==this.entrySelectionTopic&&h.publish(this.entrySelectionTopic,[{action:"set",source:this,feed:this._feed,entry:c}]);this._isEditable(c)&&c._entryWidget.enableDelete();this._deselectCurrentSelection();
this._currentSelection=c;break}else if(a===c.domNode&&this._currentSelection===c){h.publish(this.entrySelectionTopic,[{action:"delete",source:this,entry:c}]);this._deselectCurrentSelection();break}}},_deselectCurrentSelection:function(){this._currentSelection&&(k.add(this._currentSelection._entryWidget.timeNode,"feedViewerEntryUpdated"),k.remove(this._currentSelection.domNode,"feedViewerEntrySelected"),k.remove(this._currentSelection._entryWidget.timeNode,"feedViewerEntryUpdatedSelected"),this._currentSelection._entryWidget.disableDelete(),
this._currentSelection=null)},_isEditable:function(a){var b=!1;if(a&&null!==a&&a.links&&null!==a.links)for(var c in a.links)if(a.links[c].rel&&"edit"==a.links[c].rel){b=!0;break}return b},onEntrySelected:function(a){},_isRelativeURL:function(a){var b=function(f){var e=!1;0===f.indexOf("file://")&&(e=!0);return e},c=function(f){var e=!1;0===f.indexOf("http://")&&(e=!0);return e},d=!1;null!==a&&(b(a)||c(a)||(d=!0));return d},_calculateBaseURL:function(a,b){var c=null;if(null!==a){var d=a.indexOf("?");
-1!=d&&(a=a.substring(0,d));b?(d=a.lastIndexOf("/"),c=0<d&&d<a.length&&d!==a.length-1?a.substring(0,d+1):a):(d=a.indexOf("://"),0<d&&(d+=3,b=a.substring(0,d),a=a.substring(d,a.length),d=a.indexOf("/"),c=d<a.length&&0<d?b+a.substring(0,d):b+a))}return c},_isFilterAccepted:function(a){var b=!1;if(this._includeFilters&&0<this._includeFilters.length)for(var c=0;c<this._includeFilters.length;c++){if(this._includeFilters[c].match(a)){b=!0;break}}else b=!0;return b},addCategoryIncludeFilter:function(a){if(a){var b=
a.scheme,c=a.term;a=a.label;var d=!0;b||(b=null);c||(b=null);a||(b=null);if(this._includeFilters&&0<this._includeFilters.length)for(var f=0;f<this._includeFilters.length;f++){var e=this._includeFilters[f];if(e.term===c&&e.scheme===b&&e.label===a){d=!1;break}}d&&this._includeFilters.push(widget.FeedViewer.CategoryIncludeFilter(b,c,a))}},removeCategoryIncludeFilter:function(a){if(a){var b=a.scheme,c=a.term;a=a.label;b||(b=null);c||(b=null);a||(b=null);var d=[];if(this._includeFilters&&0<this._includeFilters.length){for(var f=
0;f<this._includeFilters.length;f++){var e=this._includeFilters[f];e.term===c&&e.scheme===b&&e.label===a||d.push(e)}this._includeFilters=d}}},_handleEvent:function(a){a.source!=this&&("update"==a.action&&a.entry?(this.localSaveOnly||this.atomIO.updateEntry(a.entry,n.hitch(a.source,a.callback),null,!0),this._currentSelection._entryWidget.setTime(this._displayDateForEntry(a.entry).toLocaleTimeString()),this._currentSelection._entryWidget.setTitle(a.entry.title.value)):"post"==a.action&&a.entry&&(this.localSaveOnly?
this._addEntry(a.entry):this.atomIO.addEntry(a.entry,this.url,n.hitch(this,this._addEntry))))},_addEntry:function(a){this._feed.addEntry(a);this.setFeed(this._feed);h.publish(this.entrySelectionTopic,[{action:"set",source:this,feed:this._feed,entry:a}])},destroy:function(){this.clear();u.forEach(this._subscriptions,h.unsubscribe)}}),C=l.FeedViewerEntry=p("dojox.atom.widget.FeedViewerEntry",[r,t],{templateString:y,entryNode:null,timeNode:null,deleteButton:null,entry:null,feed:null,postCreate:function(){this.deleteButton.innerHTML=
A.deleteButton},setTitle:function(a){this.titleNode.lastChild&&this.titleNode.removeChild(this.titleNode.lastChild);var b=document.createElement("div");b.innerHTML=a;this.titleNode.appendChild(b)},setTime:function(a){this.timeNode.lastChild&&this.timeNode.removeChild(this.timeNode.lastChild);a=document.createTextNode(a);this.timeNode.appendChild(a)},enableDelete:function(){null!==this.deleteButton&&(this.deleteButton.style.display="inline")},disableDelete:function(){null!==this.deleteButton&&(this.deleteButton.style.display=
"none")},deleteEntry:function(a){a.preventDefault();a.stopPropagation();this.feed.deleteEntry(this)},onClick:function(a){}}),B=l.FeedViewerGrouping=p("dojox.atom.widget.FeedViewerGrouping",[r,t],{templateString:z,groupingNode:null,titleNode:null,setText:function(a){this.titleNode.lastChild&&this.titleNode.removeChild(this.titleNode.lastChild);a=document.createTextNode(a);this.titleNode.appendChild(a)}});l.AtomEntryCategoryFilter=p("dojox.atom.widget.AtomEntryCategoryFilter",null,{scheme:"",term:"",
label:"",isFilter:!0});l.CategoryIncludeFilter=p("dojox.atom.widget.FeedViewer.CategoryIncludeFilter",null,{constructor:function(a,b,c){this.scheme=a;this.term=b;this.label=c},match:function(a){var b=!1;if(null!==a&&(a=a.categories,null!==a))for(var c=0;c<a.length;c++){var d=a[c];if(""!==this.scheme&&this.scheme!==d.scheme)break;if(""!==this.term&&this.term!==d.term)break;if(""!==this.label&&this.label!==d.label)break;b=!0}return b}});return l});