//>>built
define("dojo/_base/lang dojo/_base/array dojo/Deferred dojo/when dojo/promise/all dojo/on dojo/sniff".split(" "),function(h,g,t,p,u,q,r){var k="transitionend",f="t",l="translate3d(",m=",0,0)";r("webkit")?(f="WebkitT",k="webkitTransitionEnd"):r("mozilla")&&(f="MozT",l="translateX(",m=")");var d=function(a){h.mixin(this,{startState:{},endState:{},node:null,duration:250,"in":!0,direction:1,autoClear:!0});h.mixin(this,a);this.deferred||(this.deferred=new t)};h.extend(d,{play:function(){d.groupedPlay([this])},
_applyState:function(a){var c=this.node.style,b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b])},initState:function(){this.node.style[f+"ransitionProperty"]="none";this.node.style[f+"ransitionDuration"]="0ms";this._applyState(this.startState)},_beforeStart:function(){"none"===this.node.style.display&&(this.node.style.display="");this.beforeStart()},_beforeClear:function(){this.node.style[f+"ransitionProperty"]="";this.node.style[f+"ransitionDuration"]="";!0!==this["in"]&&(this.node.style.display="none");
this.beforeClear()},_onAfterEnd:function(){this.deferred.resolve(this.node);this.node.id&&d.playing[this.node.id]===this.deferred&&delete d.playing[this.node.id];this.onAfterEnd()},beforeStart:function(){},beforeClear:function(){},onAfterEnd:function(){},start:function(){this._beforeStart();this._startTime=(new Date).getTime();this._cleared=!1;var a=this;a.node.style[f+"ransitionProperty"]="all";a.node.style[f+"ransitionDuration"]=a.duration+"ms";q.once(a.node,k,function(){a.clear()});this._applyState(this.endState)},
clear:function(){this._cleared||(this._cleared=!0,this._beforeClear(),this._removeState(this.endState),this._onAfterEnd())},_removeState:function(a){var c=this.node.style,b;for(b in a)a.hasOwnProperty(b)&&(c[b]="")}});d.slide=function(a,c){c=new d(c);c.node=a;var b=a="0";c["in"]?a=1===c.direction?"100%":"-100%":b=1===c.direction?"-100%":"100%";c.startState[f+"ransform"]=l+a+m;c.endState[f+"ransform"]=l+b+m;return c};d.fade=function(a,c){c=new d(c);c.node=a;var b=a="0";c["in"]?b="1":a="1";h.mixin(c,
{startState:{opacity:a},endState:{opacity:b}});return c};d.flip=function(a,c){c=new d(c);c.node=a;c["in"]?(h.mixin(c,{startState:{opacity:"0"},endState:{opacity:"1"}}),c.startState[f+"ransform"]="scale(0,0.8) skew(0,-30deg)",c.endState[f+"ransform"]="scale(1,1) skew(0,0)"):(h.mixin(c,{startState:{opacity:"1"},endState:{opacity:"0"}}),c.startState[f+"ransform"]="scale(1,1) skew(0,0)",c.endState[f+"ransform"]="scale(0,0.8) skew(0,30deg)");return c};var n=function(a){var c=[];g.forEach(a,function(b){b.id&&
d.playing[b.id]&&c.push(d.playing[b.id])});return u(c)};d.getWaitingList=n;d.groupedPlay=function(a){var c=g.filter(a,function(b){return b.node});c=n(c);g.forEach(a,function(b){b.node.id&&(d.playing[b.node.id]=b.deferred)});p(c,function(){g.forEach(a,function(b){b.initState()});setTimeout(function(){g.forEach(a,function(b){b.start()});q.once(a[a.length-1].node,k,function(){for(var b,e=0;e<a.length-1;e++)0===a[e].deferred.fired||a[e]._cleared||(b=(new Date).getTime()-a[e]._startTime,b>=a[e].duration&&
a[e].clear())});setTimeout(function(){for(var b,e=0;e<a.length;e++)0===a[e].deferred.fired||a[e]._cleared||(b=(new Date).getTime()-a[e]._startTime,b>=a[e].duration&&a[e].clear())},a[0].duration+50)},33)})};d.chainedPlay=function(a){var c=g.filter(a,function(b){return b.node});c=n(c);g.forEach(a,function(b){b.node.id&&(d.playing[b.node.id]=b.deferred)});p(c,function(){g.forEach(a,function(v){v.initState()});for(var b=1,e=a.length;b<e;b++)a[b-1].deferred.then(h.hitch(a[b],function(){this.start()}));
setTimeout(function(){a[0].start()},33)})};d.playing={};return d});