//>>built
define(["dojo","dojox","dojo/dnd/Selector"],function(g,t){return g.declare("dojox.dnd.Selector",g.dnd.Selector,{conservative:!0,isSelected:function(a){a=g.isString(a)?a:a.id;return this.getItem(a)&&this.selected[a]},selectNode:function(a,b){b||this.selectNone();b=g.isString(a)?a:a.id;this.getItem(b)&&(this._removeAnchor(),this.anchor=g.byId(a),this._addItemClass(this.anchor,"Anchor"),this.selection[b]=1,this._addItemClass(this.anchor,"Selected"));return this},deselectNode:function(a){var b=g.isString(a)?
a:a.id;this.getItem(b)&&this.selection[b]&&(this.anchor===g.byId(a)&&this._removeAnchor(),delete this.selection[b],this._removeItemClass(this.anchor,"Selected"));return this},selectByBBox:function(a,b,c,f,e){e||this.selectNone();this.forInItems(function(d,h){(d=g.byId(h))&&this._isBoundedByBox(d,a,b,c,f)&&this.selectNode(h,!0)},this);return this},_isBoundedByBox:function(a,b,c,f,e){return this.conservative?this._conservativeBBLogic(a,b,c,f,e):this._liberalBBLogic(a,b,c,f,e)},shift:function(a,b){var c=
this.getSelectedNodes();c&&c.length&&this.selectNode(this._getNodeId(c[c.length-1].id,a),b)},_getNodeId:function(a,b){for(var c=this.getAllNodes(),f=a,e=0,d=c.length;e<d;++e)if(c[e].id==a){a=Math.min(d-1,Math.max(0,e+(b?1:-1)));e!=a&&(f=c[a].id);break}return f},_conservativeBBLogic:function(a,b,c,f,e){a=g.coords(a);if(b>f){var d=b;b=f;f=d}c>e&&(d=c,c=e,e=d);return a.x>=b&&a.x+a.w<=f&&a.y>=c&&a.y+a.h<=e},_liberalBBLogic:function(a,b,c,f,e){var d=g.position(a),h=a=!1,n=d.x,q=d.y,p=d.x+d.w,r=d.y+d.h;
if(b<f){d=b;var m=c}else a=!0,d=f,m=e;if(c<e){h=!0;var k=f;var l=e}else k=b,l=c,d=f,m=e;a&&h&&(k=b,l=e,d=f,m=c);return((n>=d||p<=k)&&d<=p&&k>=n||n<=d&&p>=k)&&(m<=r&&l>=q||r>=l&&q<=l)}})});