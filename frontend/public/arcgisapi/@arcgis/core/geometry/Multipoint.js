/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as t}from"../chunks/tslib.es6.js";import"../chunks/ArrayPool.js";import"../chunks/object.js";import"../chunks/deprecate.js";import{clone as s}from"../core/lang.js";import"../config.js";import"../chunks/Logger.js";import"../chunks/string.js";import"../chunks/metadata.js";import{property as e}from"../core/accessorSupport/decorators/property.js";import"../core/Accessor.js";import"../chunks/PropertyOrigin.js";import"../core/scheduling.js";import"../core/promiseUtils.js";import"../chunks/Message.js";import"../core/Error.js";import"../chunks/ensureType.js";import{subclass as r}from"../core/accessorSupport/decorators/subclass.js";import"../chunks/JSONSupport.js";import"../core/urlUtils.js";import"../core/accessorSupport/decorators/cast.js";import"../chunks/reader.js";import{w as i}from"../chunks/writer.js";import"../chunks/resourceExtension.js";import"./SpatialReference.js";import o from"./Geometry.js";import n from"./Point.js";import"../chunks/Ellipsoid.js";import"./support/webMercatorUtils.js";import a from"./Extent.js";import{u as p}from"../chunks/zmUtils.js";var h;function c(t){return(s,e)=>null==s?e:null==e?s:t(s,e)}let l=h=class extends o{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,s){if(!t&&!s)return null;const e={};var r;Array.isArray(t)?(e.points=t,e.spatialReference=s):!(r=t)||"esri.geometry.SpatialReference"!==r.declaredClass&&null==r.wkid?(t.points&&(e.points=t.points),t.spatialReference&&(e.spatialReference=t.spatialReference),t.hasZ&&(e.hasZ=t.hasZ),t.hasM&&(e.hasM=t.hasM)):e.spatialReference=t;const i=e.points&&e.points[0];return i&&(void 0===e.hasZ&&void 0===e.hasM?(e.hasZ=i.length>2,e.hasM=!1):void 0===e.hasZ?e.hasZ=i.length>3:void 0===e.hasM&&(e.hasM=i.length>3)),e}get extent(){const t=this.points;if(!t.length)return null;const s=new a,e=this.hasZ,r=this.hasM,i=e?3:2,o=t[0],n=c(Math.min),p=c(Math.max);let h,l,u,m,[f,j]=o,[d,y]=o;for(let s=0,o=t.length;s<o;s++){const o=t[s],[a,c]=o;if(f=n(f,a),j=n(j,c),d=p(d,a),y=p(y,c),e&&o.length>2){const t=o[2];h=n(h,t),u=p(u,t)}if(r&&o.length>i){const t=o[i];l=n(l,t),m=p(m,t)}}return s.xmin=f,s.ymin=j,s.xmax=d,s.ymax=y,s.spatialReference=this.spatialReference,e?(s.zmin=h,s.zmax=u):(s.zmin=null,s.zmax=null),r?(s.mmin=l,s.mmax=m):(s.mmin=null,s.mmax=null),s}writePoints(t,e){e.points=s(this.points)}addPoint(t){return this.clearCache(),p(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this}clone(){const t={points:s(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new h(t)}getPoint(t){if(!this._validateInputs(t))return null;const s=this.points[t],e={x:s[0],y:s[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(e.z=s[2],r=3),this.hasM&&(e.m=s[r]),new n(e)}removePoint(t){return this._validateInputs(t)?(this.clearCache(),new n(this.points.splice(t,1)[0],this.spatialReference)):null}setPoint(t,s){return this._validateInputs(t)?(this.clearCache(),p(this,s),Array.isArray(s)||(s=s.toArray()),this.points[t]=s,this):this}toJSON(t){return this.write(null,t)}_validateInputs(t){return null!=t&&t>=0&&t<this.points.length}};t([e({dependsOn:["points","hasZ","hasM","spatialReference"],autoTracked:!1})],l.prototype,"cache",void 0),t([e({dependsOn:["cache"],autoTracked:!1})],l.prototype,"extent",null),t([e({type:[[Number]],json:{write:{isRequired:!0}}})],l.prototype,"points",void 0),t([i("points")],l.prototype,"writePoints",null),l=h=t([r("esri.geometry.Multipoint")],l),l.prototype.toJSON.isDefaultToJSON=!0;var u=l;export default u;
