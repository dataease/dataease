/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../chunks/ArrayPool.js";import"../chunks/object.js";import"../chunks/deprecate.js";import"../core/lang.js";import"../config.js";import"../chunks/Logger.js";import"../chunks/string.js";import"../chunks/metadata.js";import{property as t}from"../core/accessorSupport/decorators/property.js";import"../core/Accessor.js";import"../chunks/PropertyOrigin.js";import"../core/scheduling.js";import{e as i}from"../core/promiseUtils.js";import"../chunks/Message.js";import"../core/Error.js";import"../chunks/compilerUtils.js";import"../chunks/ensureType.js";import{subclass as r}from"../core/accessorSupport/decorators/subclass.js";import"../chunks/Evented.js";import"../core/Collection.js";import"../chunks/JSONSupport.js";import"../chunks/Promise.js";import"../chunks/Loadable.js";import"../core/urlUtils.js";import{aliasOf as o}from"../core/accessorSupport/decorators/aliasOf.js";import"../core/accessorSupport/decorators/cast.js";import"../chunks/jsonMap.js";import"../chunks/reader.js";import"../chunks/writer.js";import"../chunks/resourceExtension.js";import"../geometry/SpatialReference.js";import"../chunks/locale.js";import"../chunks/number.js";import"../intl.js";import"../kernel.js";import"../request.js";import"../chunks/assets.js";import"../geometry/Geometry.js";import"../geometry/Point.js";import"../chunks/Ellipsoid.js";import"../geometry/support/webMercatorUtils.js";import"../geometry/Extent.js";import"../chunks/zmUtils.js";import"../geometry/Multipoint.js";import"../geometry/Polygon.js";import"../chunks/extentUtils.js";import"../geometry/Polyline.js";import"../chunks/typeUtils.js";import"../geometry/support/jsonUtils.js";import"../geometry.js";import"../chunks/Identifiable.js";import"../core/Handles.js";import"../layers/Layer.js";import"../core/watchUtils.js";import"../chunks/domUtils.js";import"../chunks/widgetUtils.js";import"../chunks/projector.js";import{m as s}from"../chunks/messageBundle.js";import{r as n}from"../chunks/renderable.js";import{j as a}from"../chunks/index.js";import l from"./Widget.js";import"../chunks/ClipRect.js";import p from"./Swipe/SwipeViewModel.js";const c="esri-swipe",d="esri-swipe--disabled",m="esri-swipe--vertical",h="esri-swipe--horizontal",u="esri-swipe__container",v="esri-swipe__divider",w="esri-swipe__handle",j="esri-swipe__handle--hidden",g="esri-icon-up-down-arrows",y="esri-swipe__handle-icon",f="esri-icon-drag-horizontal",_="esri-icon-drag-vertical",k="esri-widget",b="esri-disabled",C={handle:!0,divider:!0};let P=class extends l{constructor(e,t){super(e,t),this.direction=null,this.disabled=!1,this.dragLabel=void 0,this.iconClass=g,this.label=void 0,this.leadingLayers=null,this.messages=null,this.position=null,this.trailingLayers=null,this.view=null,this.viewModel=new p,this._pointerOffset=null,this._container=null,this._onContainerPointerDown=this._onContainerPointerDown.bind(this),this._onContainerPointerMove=this._onContainerPointerMove.bind(this),this._onContainerPointerUp=this._onContainerPointerUp.bind(this)}set visibleElements(e){this._set("visibleElements",{...C,...e})}get visibleElements(){return this._get("visibleElements")||C}render(){const{state:e,direction:t}=this.viewModel,i="disabled"===e||this.disabled,r={[b]:i,[d]:i,[m]:"vertical"===t,[h]:"horizontal"===t};return a("div",{class:this.classes(c,k,r)},"disabled"===e?null:this.renderContainer())}renderHandle(){const{direction:e}=this.viewModel,{visibleElements:t}=this,i={[f]:"vertical"===e,[_]:"horizontal"===e},r=this.classes(w,!t.handle&&j);return a("div",{key:"handle",role:"presentation",class:r},a("span",{"aria-hidden":"true",class:this.classes(y,i)}))}renderDivider(){const{visibleElements:e}=this;return e&&e.divider?a("div",{key:"divider",role:"presentation",class:v}):null}renderContent(){return[this.renderDivider(),this.renderHandle()]}renderContainer(){const{disabled:e,dragLabel:t,viewModel:i}=this,{max:r,min:o,direction:s,position:n}=i,l=`${n}%`,p={top:"vertical"===s?l:null,left:"vertical"===s?null:l},c=this.renderContent();return a("div",e?{key:"container",role:"presentation",styles:p,class:u}:{tabIndex:0,key:"container",bind:this,afterCreate:this._afterContainerCreate,onkeydown:this._onContainerKeyDown,"touch-action":"none",role:"slider",title:t,"aria-label":t,"aria-orientation":s,"aria-valuemax":`${r}`,"aria-valuemin":`${o}`,"aria-valuenow":`${n}`,"aria-valuetext":l,styles:p,class:u},c)}_afterContainerCreate(e){this._container=e,e.addEventListener("pointerdown",this._onContainerPointerDown)}_calculatePointerOffset(e){const{direction:t}=this,i=e.target,r=("vertical"===t?i.clientHeight:i.clientWidth)/2,o=i.getBoundingClientRect(),s=e.clientX-o.left,n=e.clientY-o.top;this._pointerOffset="vertical"===t?n-r:s-r}_onContainerPointerDown(e){e.preventDefault(),this._container&&document.activeElement!==this.container&&this._container.focus(),this._calculatePointerOffset(e),document.addEventListener("pointerup",this._onContainerPointerUp),document.addEventListener("pointermove",this._onContainerPointerMove)}_onContainerPointerUp(e){e.preventDefault(),document.removeEventListener("pointerup",this._onContainerPointerUp),document.removeEventListener("pointermove",this._onContainerPointerMove)}_onContainerPointerMove(e){e.preventDefault();const{_pointerOffset:t,container:i,direction:r}=this,{clientX:o,clientY:s}=e,{top:n,left:a,width:l,height:p}=i.getBoundingClientRect(),c=("vertical"===r?s-n-t:o-a-t)/("vertical"===r?p:l)*100;this.position=c}_getKeyPosition(e){const t=i(e),{position:r}=this,{max:o,min:s,step:n,stepMultiplier:a,direction:l}=this.viewModel,p=n*a;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].indexOf(t)>-1&&(e.preventDefault(),e.stopPropagation());if("vertical"===l?"ArrowDown"===t||"ArrowRight"===t:"ArrowUp"===t||"ArrowRight"===t){return r+(e.shiftKey?p:n)}if("vertical"===l?"ArrowUp"===t||"ArrowLeft"===t:"ArrowDown"===t||"ArrowLeft"===t){return r-(e.shiftKey?p:n)}if("Home"===t)return s;if("End"===t)return o;if("vertical"===l?"PageDown"===t:"PageUp"===t)return r+p;return("vertical"===l?"PageUp"===t:"PageDown"===t)?r-p:null}_onContainerKeyDown(e){const t=this._getKeyPosition(e);"number"==typeof t&&(this.position=t)}};e([o("viewModel.direction")],P.prototype,"direction",void 0),e([t(),n()],P.prototype,"disabled",void 0),e([t({aliasOf:{source:"messages.dragLabel",overridable:!0}}),n()],P.prototype,"dragLabel",void 0),e([t()],P.prototype,"iconClass",void 0),e([t({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],P.prototype,"label",void 0),e([o("viewModel.leadingLayers")],P.prototype,"leadingLayers",void 0),e([t(),n(),s("esri/widgets/Swipe/t9n/Swipe")],P.prototype,"messages",void 0),e([o("viewModel.position")],P.prototype,"position",void 0),e([o("viewModel.trailingLayers")],P.prototype,"trailingLayers",void 0),e([o("viewModel.view"),n()],P.prototype,"view",void 0),e([t({type:p}),n(["viewModel.state","viewModel.position","viewModel.direction"])],P.prototype,"viewModel",void 0),e([t(),n()],P.prototype,"visibleElements",null),P=e([r("esri.widgets.Swipe")],P);var M=P;export default M;
