// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../core/maybe ../core/screenUtils ./vec3f64 ./vec3 ../core/ObjectStack ./vec2 ../views/3d/support/stack".split(" "),function(e,t,h,k,d,l,u,f){function g(a){return a?{origin:k.clone(a.origin),direction:k.clone(a.direction)}:{origin:k.create(),direction:k.create()}}function v(a,b){const c=D.get();c.origin=a;c.direction=b;return c}function w(a,b=g()){return m(a.origin,a.direction,b)}function x(a,b,c=g()){d.copy(c.origin,a);d.subtract(c.direction,b,a);return c}function m(a,b,c=g()){d.copy(c.origin,
a);d.copy(c.direction,b);return c}function y(a,b,c=g()){return n(a,a.screenToRender(b,h.castRenderScreenPointArray3(f.sv3d.get())),c)}function n(a,b,c=g()){const z=h.castRenderScreenPointArray3(u.copy(f.sv3d.get(),b));z[2]=0;if(!a.unprojectFromRenderScreen(z,c.origin))return null;b=h.castRenderScreenPointArray3(u.copy(f.sv3d.get(),b));b[2]=1;a=a.unprojectFromRenderScreen(b,f.sv3d.get());if(t.isNone(a))return null;d.subtract(c.direction,a,c.origin);return c}function A(a,b,c=g()){return p(a,a.screenToRender(b,
h.castRenderScreenPointArray3(f.sv3d.get())),c)}function p(a,b,c=g()){d.copy(c.origin,a.eye);b=d.set(f.sv3d.get(),b[0],b[1],1);a=a.unprojectFromRenderScreen(b,f.sv3d.get());if(t.isNone(a))return null;d.subtract(c.direction,a,c.origin);return c}function q(a,b){a=d.cross(f.sv3d.get(),d.normalize(f.sv3d.get(),a.direction),d.subtract(f.sv3d.get(),b,a.origin));return d.dot(a,a)}function B(a,b){return Math.sqrt(q(a,b))}function C(a,b,c){b=d.dot(a.direction,d.subtract(c,b,a.origin));d.add(c,a.origin,d.scale(c,
a.direction,b));return c}function r(){return{origin:null,direction:null}}const D=new l.ObjectStack(r);l=Object.freeze({__proto__:null,create:g,wrap:v,copy:w,fromPoints:x,fromValues:m,fromScreen:y,fromRender:n,fromScreenAtEye:A,fromRenderAtEye:p,distance2:q,distance:B,closestPoint:C,createWrapper:r});e.closestPoint=C;e.copy=w;e.create=g;e.createWrapper=r;e.distance=B;e.distance2=q;e.fromPoints=x;e.fromRender=n;e.fromRenderAtEye=p;e.fromScreen=y;e.fromScreenAtEye=A;e.fromValues=m;e.rayModule=l;e.wrap=
v});