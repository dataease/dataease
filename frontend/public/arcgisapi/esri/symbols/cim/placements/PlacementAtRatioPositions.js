// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../GeometryWalker"],function(f,k,l,g){let h=function(){function c(){}c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.execute=function(e,b,a){return new m(e,b,a)};return c}();h.instance=null;let m=function(c){function e(b,a,d){b=c.call(this,b,!0,!0)||this;b._walker=new g.GeometryWalker;b._walker.updateTolerance(d);b._angleToLine=void 0!==a.angleToLine?a.angleToLine:!0;b._offset=void 0!==
a.offset?a.offset*d:0;b._beginGap=void 0!==a.beginPosition?a.beginPosition*d:0;b._endGap=void 0!==a.endPosition?a.endPosition*d:0;b._flipFirst=void 0!==a.flipFirst?a.flipFirst:!0;b._pattern=new g.DashPattern;b._pattern.init(a.positionArray,!1,!1);b._subPathLen=0;b._posCount=b._pattern.size();b._isFirst=!0;b._prevPos=0;return b}k._inheritsLoose(e,c);e.prototype.processPath=function(b){if(this._pattern.isEmpty())return null;if(this.iteratePath){b=this._pattern.nextValue()*this._subPathLen;var a=this._beginGap+
b;b=a-this._prevPos;this._prevPos=a}else{this._posCount=this._pattern.size();this._isFirst=!0;this._prevPos=0;this._subPathLen=this._walker.calculatePathLength(b)-this._beginGap-this._endGap;if(0>this._subPathLen)return this.iteratePath=!1,null;if(!this._walker.init(b,this._pattern,!1))return null;this._pattern.reset();b=this._pattern.nextValue()*this._subPathLen;a=this._beginGap+b;b=a-this._prevPos;this._prevPos=a;this.iteratePath=!0}a={};if(!this._walker.nextPointAndAngle(b,a,1))return this.iteratePath=
!1,null;this.internalPlacement.setTranslate(a.pt[0]+this._offset*a.sa,a.pt[1]-this._offset*a.ca);b=this._isFirst&&this._flipFirst;let d;this._angleToLine?(d=a.ca,a=a.sa):(d=1,a=0);b&&(d=-d,a=-a);this.internalPlacement.setRotateCS(d,a);this._isFirst=!1;this._posCount--;0===this._posCount&&(this.iteratePath=!1);return this.internalPlacement};return e}(l.PathTransformationCursor);f.PlacementAtRatioPositions=h;Object.defineProperty(f,"__esModule",{value:!0})});