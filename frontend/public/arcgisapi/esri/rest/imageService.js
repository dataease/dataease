// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../core/maybe ../request ../geometry/support/normalizeUtils ./utils ../tasks/support/ImageIdentifyResult".split(" "),function(h,l,k,m,f,p){async function n(b,a,g){b=f.parseUrl(b);var d=await m.normalizeCentralMeridian(a.geometry?[a.geometry]:[]);a=a.toJSON();{const c=null==a?void 0:a.time;if(c&&(null!=c.start||null!=c.end)){const e=[];null!=c.start&&e.push(c.start);null!=c.end&&-1===e.indexOf(c.end)&&e.push(c.end);a.time=e.join(",")}}d=d&&d[0];l.isSome(d)&&(a.geometry=d.toJSON());
b=f.encode({...b.query,f:"json",...a});return f.asValidOptions(b,g)}h.computeHistograms=async function(b,a,g){a=await n(b,a,g);b=f.parseUrl(b);({data:b}=await k(`${b.path}/computeHistograms`,a));return{histograms:b.histograms}};h.computeStatisticsHistograms=async function(b,a,g){a=await n(b,a,g);b=f.parseUrl(b);({data:b}=await k(`${b.path}/computeStatisticsHistograms`,a));({statistics:a}=b);null!=a&&a.length&&a.forEach(d=>{d.avg=d.mean;d.stddev=d.standardDeviation});return{statistics:a,histograms:b.histograms}};
h.identify=async function(b,a,g){const d=f.parseUrl(b);return m.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(c=>{var e=a.toJSON();c=c&&c[0];l.isSome(c)&&(e.geometry=JSON.stringify(c.toJSON()));e=f.encode({...d.query,f:"json",...e});e=f.asValidOptions(e,g);return k(d.path+"/identify",e)}).then(c=>p.fromJSON(c.data))};Object.defineProperty(h,"__esModule",{value:!0})});