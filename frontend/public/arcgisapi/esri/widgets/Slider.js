// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/accessorSupport/decorators/cast ../core/deprecate ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/events ../intl/substitute ../intl ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/renderable ../chunks/index ./Widget ./Slider/SliderViewModel".split(" "),
function(y,m,l,r,P,t,B,Q,K,X,R,Y,Z,aa,G,L,ba,S,T,z,u,U,V){const w={showInput:"Enter",hideInput1:"Enter",hideInput2:"Escape",hideInput3:"Tab",moveAnchorUp:"ArrowUp",moveAnchorDown:"ArrowDown",moveAnchorLeft:"ArrowLeft",moveAnchorRight:"ArrowRight",moveAnchorToMax:"End",moveAnchorToMin:"Home"},M=P.getLogger("esri.widgets.Slider"),N={labels:!1,rangeLabels:!1};l=function(O){function H(a,b){var c=O.call(this,a,b)||this;c._activeLabelInputIndex=null;c._anchorElements=[];c._baseNode=null;c._dragged=!1;c._dragStartInfo=
null;c._focusedAnchorIndex=null;c._isMinInputActive=!1;c._isMaxInputActive=!1;c._labelElements=[];c._lastMovedHandleIndex=null;c._observer=null;c._positionPrecision=5;c._segmentDragStartInfo=null;c._segmentElements=[];c._thumbElements=[];c._tickElements=[];c._trackHeight=null;c._trackWidth=null;c._zIndices=null;c._zIndexOffset=3;c.disabled=!1;c.extraNodes=[];c.draggableSegmentsEnabled=!0;c.inputCreatedFunction=null;c.inputFormatFunction=null;c.inputParseFunction=null;c.label=void 0;c.labelInputsEnabled=
!1;c.labelFormatFunction=null;c.labels=null;c.max=null;c.messages=null;c.min=null;c.precision=4;c.rangeLabelInputsEnabled=!1;c.snapOnClickEnabled=!0;c.steps=null;c.thumbsConstrained=!0;c.thumbCreatedFunction=null;c.tickConfigs=null;c.trackElement=null;c.values=null;c.viewModel=new V;c.visibleElements={...N};c._observer=new ResizeObserver(()=>c.scheduleRender());c._onAnchorPointerDown=c._onAnchorPointerDown.bind(y._assertThisInitialized(c));c._onAnchorPointerMove=c._onAnchorPointerMove.bind(y._assertThisInitialized(c));
c._onAnchorPointerUp=c._onAnchorPointerUp.bind(y._assertThisInitialized(c));c._onLabelPointerDown=c._onLabelPointerDown.bind(y._assertThisInitialized(c));c._onLabelPointerUp=c._onLabelPointerUp.bind(y._assertThisInitialized(c));c._onSegmentPointerDown=c._onSegmentPointerDown.bind(y._assertThisInitialized(c));c._onSegmentPointerMove=c._onSegmentPointerMove.bind(y._assertThisInitialized(c));c._onSegmentPointerUp=c._onSegmentPointerUp.bind(y._assertThisInitialized(c));c._onTrackPointerDown=c._onTrackPointerDown.bind(y._assertThisInitialized(c));
return c}y._inheritsLoose(H,O);var d=H.prototype;d.destroy=function(){document.removeEventListener("pointerup",this._onLabelPointerUp);document.removeEventListener("pointermove",this._onLabelPointerMove);document.removeEventListener("pointerup",this._onAnchorPointerUp);document.removeEventListener("pointermove",this._onAnchorPointerMove)};d.castVisibleElements=function(a){return{...N,...a}};d.render=function(){const {label:a}=this,b=this.classes("esri-slider","esri-widget",this._isHorizontalLayout()?
"esri-slider--horizontal":"esri-slider--vertical",this._isReversedLayout()?"esri-slider--reversed":null,this._isDisabled()?"esri-disabled":null);this._storeTrackDimensions();return u.jsx("div",{afterCreate:this._afterBaseNodeCreate,bind:this,"aria-label":a,class:b,"touch-action":"none"},this.renderContent())};d.toNextStep=function(a){this._toStep(a,1)};d.toPreviousStep=function(a){this._toStep(a,-1)};d.renderContent=function(){const {max:a,min:b}=this;if(r.isSome(b)&&r.isSome(a)&&!(b>a))return[this.renderMin(),
this.renderSliderContainer(),this.renderMax()]};d.renderSliderContainer=function(){return u.jsx("div",{key:"slider-container",bind:this,class:"esri-slider__content"},this.renderTrackElement(),this.renderTicksContainer(),this.renderExtraContentElements())};d.renderTrackElement=function(){return u.jsx("div",{afterCreate:this._afterTrackCreate,bind:this,class:"esri-slider__track","data-node-ref":"trackElement","touch-action":"none"},this.renderSegmentElements(),this.renderAnchorElements())};d.renderSegmentElements=
function(){if(this.trackElement&&this.values&&this.values.length){var a=this.values.length+1,b=[];for(let c=0;c<a;c++)b.push(this.renderSegmentElement(c));return b}};d.renderSegmentElement=function(a){const {_trackHeight:b,_trackWidth:c,draggableSegmentsEnabled:e,id:g,state:f,values:h}=this;var k=this._isHorizontalLayout(),p=k?c:b;const q=a===h.length?null:a,n=0===a?null:a-1;var A=r.isSome(q);const D=r.isSome(n);let v,C;var x=[...h].sort((I,J)=>I-J);this._isReversedLayout()?(v=D?this._positionFromValue(x[n]):
k?p:0,C=A?this._positionFromValue(x[q]):k?0:p):(v=A?this._positionFromValue(x[q]):k?p:0,C=D?this._positionFromValue(x[n]):k?0:p);x=this._applyPrecisionToPosition(100*C/p);p=(v-C)/p;k=k?`transform: translate(${x}%, 0px) scale(${p}, 1);`:`transform: translate(0px, ${x}%) scale(1, ${p});`;A=this.classes("esri-slider__segment","esri-slider__segment-"+a,e&&A&&D&&"disabled"!==f?"esri-slider__segment--interactive":null);return u.jsx("div",{afterCreate:this._afterSegmentCreate,afterRemoved:this._afterSegmentRemoved,
bind:this,class:A,"data-max-thumb-index":q,"data-min-thumb-index":n,"data-segment-index":a,key:`${g}-segment-${a}`,style:k,"touch-action":"none"})};d.renderAnchorElements=function(){const {trackElement:a,values:b}=this;if(b&&b.length)return this._zIndices=b.map((c,e)=>{c=this._positionFromValue(c);c=this._positionToPercent(c);c=this._isHorizontalLayout()?50<c:50>c;return this._zIndexOffset+(b.length+(c?-1:1)*e)}),a&&b&&b.length?b.map((c,e)=>this.renderAnchorElement(c,e)):null};d.renderAnchorElement=
function(a,b){var c=this._positionFromValue(a);c=this._valueFromPosition(c);if(r.isSome(c)&&!isNaN(c)){var {_dragStartInfo:e,_lastMovedHandleIndex:g,id:f,layout:h,values:k,visibleElements:{labels:p}}=this,q=e&&e.index===b,n=g===b;c=this.classes("esri-slider__anchor","esri-slider__anchor-"+b,q?"esri-slider__anchor--moving":null,n?"esri-slider__anchor--moved":null);var A=this.labels.values[b];q=this._getStyleForAnchor(a,b,q||n);var {min:D,max:v}=this.viewModel.getBoundsForValueAtIndex(b);({messages:n}=
this);A=2===k.length?0===b?L.substitute(n.rangeMinimum,{value:a}):L.substitute(n.rangeMaximum,{value:a}):A;return u.jsx("div",{afterCreate:this._afterAnchorCreate,afterUpdate:this._afterAnchorUpdate,afterRemoved:this._afterAnchorRemoved,"aria-controls":1===k.length?null:0===b?`${f}-handle-${b+1}`:b===k.length-1?`${f}-handle-${b-1}`:`${f}-handle-${b-1} ${f}-handle-${b+1}`,"aria-label":n.sliderValue,"aria-labelledby":p?`${f}-label-${b}`:null,"aria-orientation":h,"aria-valuemax":v.toString(),"aria-valuemin":D.toString(),
"aria-valuenow":a.toString(),"aria-valuetext":A,bind:this,class:c,"data-thumb-index":b,"data-value":a,id:`${f}-handle-${b}`,key:`${f}-handle-${b}`,onkeydown:this._onAnchorKeyDown,"touch-action":"none",role:"slider",style:q,tabIndex:0},u.jsx("span",{afterCreate:this._afterThumbCreate,afterRemoved:this._afterThumbRemoved,bind:this,class:"esri-slider__thumb","data-thumb-index":b,"touch-action":"none"}),this.renderThumbLabel(b))}};d.renderThumbLabel=function(a){const {id:b,labels:c,labelInputsEnabled:e,
state:g}=this,f=this.visibleElements.labels,h=c.values[a],k=this.classes("esri-slider__label",f?null:"esri-hidden",e&&"disabled"!==g?"esri-slider__label--interactive":null);return u.jsx("span",{afterCreate:this._afterLabelCreate,afterRemoved:this._afterLabelRemoved,"aria-hidden":!f,bind:this,class:k,"data-thumb-index":a,key:`${b}-label-${a}`,id:`${b}-label-${a}`,role:e?"button":null,"touch-action":"none"},this._activeLabelInputIndex===a?this.renderValueInput(a):h)};d.renderValueInput=function(a){return u.jsx("input",
{afterCreate:this._afterInputCreate,"aria-label":this.messages.sliderValue,bind:this,class:"esri-slider__label-input","data-input-type":"thumb","data-input-index":a,required:!0,tabIndex:0,type:"text",value:this._formatInputValue(this.values[a],"value",a),onblur:this._onLabelInputBlur,onkeydown:this._onInputKeyDown})};d.renderMax=function(){const {_isMaxInputActive:a,labels:b,rangeLabelInputsEnabled:c,state:e}=this,g=this.visibleElements.rangeLabels,f=this.classes("esri-slider__max",g?null:"esri-hidden",
c&&"disabled"!==e?"esri-slider__max--interactive":null);return u.jsx("div",{"aria-hidden":!g,bind:this,class:f,onclick:this._onMaxLabelClick,onkeydown:this._onMaxLabelKeyDown,role:c?"button":null,tabIndex:c?0:null},a?this.renderMaxInput():b.max)};d.renderMin=function(){const {_isMinInputActive:a,labels:b,rangeLabelInputsEnabled:c,state:e}=this,g=this.visibleElements.rangeLabels,f=this.classes("esri-slider__min",g?null:"esri-hidden",c&&"disabled"!==e?"esri-slider__min--interactive":null);return u.jsx("div",
{"aria-hidden":!g,bind:this,class:f,onclick:this._onMinLabelClick,onkeydown:this._onMinLabelKeyDown,role:c?"button":null,tabIndex:c?0:null},a?this.renderMinInput():b.min)};d.renderMaxInput=function(){return u.jsx("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.maximumValue,bind:this,class:"esri-slider__range-input","data-input-type":"max",required:!0,tabIndex:0,type:"text",value:this._formatInputValue(this.max,"max"),onblur:this._onMaxInputBlur,onkeydown:this._onInputKeyDown})};
d.renderMinInput=function(){return u.jsx("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.minimumValue,bind:this,class:"esri-slider__range-input","data-input-type":"min",required:!0,tabIndex:0,type:"text",value:this._formatInputValue(this.min,"min"),onblur:this._onMinInputBlur,onkeydown:this._onInputKeyDown})};d.renderExtraContentElements=function(){return u.jsx("div",{bind:this,class:"esri-slider__extra-content"},this.extraNodes)};d.renderTicksContainer=function(){if(this.tickConfigs&&
this.trackElement&&(0!==this._trackHeight||0!==this._trackWidth))return this.tickConfigs.map((a,b)=>u.jsx("div",{key:"ticks-container",class:this.classes("esri-slider__ticks")},this.renderTicks(a,b)))};d.renderTicks=function(a,b){const {mode:c,values:e}=a;this._tickElements[b]=[];if("position"===c){var g=Array.isArray(e)?e:[e];return this._calculateTickPositions(g).map((f,h)=>this.renderTickGroup(a,h,b,f))}if("percent"===c&&Array.isArray(e)){const {max:f,min:h}=this,k=f-h;g=e.map(p=>this._applyPrecisionToPosition(p/
100*k+h));return this._calculateTickPositions(g).map((p,q)=>this.renderTickGroup(a,q,b,p))}g=Array.isArray(e)&&e.length?e[0]:isNaN(e)?null:e;g=this._getTickCounts(g,a);return this._calculateEquidistantTickPositions(g).map((f,h)=>this.renderTickGroup(a,h,b,f))};d.renderTickGroup=function(a,b,c,e){const g="position"===a.mode?Array.isArray(a.values)?a.values[b]:a.values:this._valueFromPosition(e);if(r.isSome(g)&&!isNaN(g))return u.jsx("div",{afterCreate:this._afterTickGroupCreate,bind:this,"data-config":a,
"data-position":e,"data-tick-config-index":c,"data-tick-group-index":b,"data-value":g,key:`tick-group-${b}`},this.renderTickLine(a,b,c,g),a.labelsVisible?this.renderTickLabel(a,b,c,g):null)};d.renderTickLine=function(a,b,c,e){return u.jsx("div",{afterCreate:this._afterTickLineCreate,"aria-valuenow":e.toString(),bind:this,class:"esri-slider__tick","data-tick-config-index":c,"data-tick-group-index":b,"data-value":e,key:`tick-label-${b}`,style:this._getPositionStyleForElement(e)})};d.renderTickLabel=
function(a,b,c,e){a=a.labelFormatFunction?a.labelFormatFunction(e,"tick",b):this.viewModel.getLabelForValue(e,"tick",b);return u.jsx("div",{afterCreate:this._afterTickLabelCreate,"aria-label":a,"aria-valuenow":e.toString(),"aria-valuetext":a,bind:this,class:"esri-slider__tick-label","data-tick-config-index":c,"data-tick-group-index":b,"data-value":e,key:`tick-label-${b}`,style:`transform: translate(-50%); ${this._getPositionStyleForElement(e)}`},a)};d._afterBaseNodeCreate=function(a){this._baseNode&&
this._observer.unobserve(this._baseNode);this._baseNode=a;this._observer.observe(this._baseNode)};d._afterTrackCreate=function(a){S.storeNode.call(this,a);a.addEventListener("pointerdown",this._onTrackPointerDown);this.scheduleRender()};d._afterSegmentCreate=function(a){this._segmentElements.push(a);a.addEventListener("pointerdown",this._onSegmentPointerDown)};d._afterSegmentRemoved=function(a){const b=this._segmentElements.indexOf(a,0);-1<b&&this._segmentElements.splice(b,1);a.removeEventListener("pointerdown",
this._onSegmentPointerDown)};d._afterAnchorCreate=function(a){this._anchorElements.push(a);a.addEventListener("pointerdown",this._onAnchorPointerDown);if(this.thumbCreatedFunction){const b=a["data-thumb-index"];this.thumbCreatedFunction(b,a["data-value"],this._thumbElements[b]||null,this._labelElements[b]||null)}};d._afterAnchorUpdate=function(a){r.isSome(this._focusedAnchorIndex)&&a["data-thumb-index"]===this._focusedAnchorIndex&&(a.focus(),this._focusedAnchorIndex=null)};d._afterAnchorRemoved=function(a){const b=
this._anchorElements.indexOf(a,0);-1<b&&this._anchorElements.splice(b,1);a.removeEventListener("pointerdown",this._onAnchorPointerDown)};d._afterThumbCreate=function(a){this._thumbElements.push(a)};d._afterThumbRemoved=function(a){a=this._thumbElements.indexOf(a,0);-1<a&&this._thumbElements.splice(a,1)};d._afterLabelCreate=function(a){this._labelElements.push(a);a.addEventListener("pointerdown",this._onLabelPointerDown);a.addEventListener("pointerup",this._onLabelPointerUp)};d._afterLabelRemoved=
function(a){const b=this._labelElements.indexOf(a,0);-1<b&&this._labelElements.splice(b,1);a.removeEventListener("pointerdown",this._onLabelPointerDown);a.removeEventListener("pointerup",this._onLabelPointerUp)};d._afterInputCreate=function(a){a.focus();a.select();if(this.inputCreatedFunction){const b=a.getAttribute("data-input-type");this.inputCreatedFunction(a,b,"thumb"===b?a["data-input-index"]:null)}};d._afterTickLineCreate=function(a){const b=a["data-tick-group-index"],c=this._tickElements[a["data-tick-config-index"]];
c[b]?c[b].line=a:c[b]={line:a,label:null}};d._afterTickLabelCreate=function(a){const b=a["data-tick-group-index"],c=this._tickElements[a["data-tick-config-index"]];c[b]?c[b].label=a:c[b]={label:a,line:null}};d._afterTickGroupCreate=function(a){const b=a["data-config"];if(b&&b.tickCreatedFunction){const c=a["data-value"];(a=this._tickElements[a["data-tick-config-index"]][a["data-tick-group-index"]])&&b.tickCreatedFunction(c,a.line||null,a.label||null)}};d._onAnchorKeyDown=function(a){if(!this._isDisabled()&&
"editing"!==this.state){var {target:b}=a,c=G.eventKey(a),{_anchorElements:e,values:g}=this;b=b["data-thumb-index"];var f=e[b],h=g[b],k=this._isHorizontalLayout(),p=[w.moveAnchorUp,w.moveAnchorDown,w.moveAnchorLeft,w.moveAnchorRight];if(c===w.showInput&&this.labelInputsEnabled)this._activeLabelInputIndex=b,this.notifyChange("state");else if(-1<p.indexOf(c))a.preventDefault(),{steps:a}=this,c=c===w.moveAnchorUp||c===w.moveAnchorRight?1:-1,r.isSome(a)?this._toStep(b,this._isReversedLayout()?-1*c:c):
({precision:a}=this,f=this._getPositionOfElement(f),k=this._valueFromPosition(f),c=this._isHorizontalLayout()?c:-1*c,f=0===a?this._positionFromValue(k+c):1===a?this._positionFromValue(k+.1*c):f+c,this._toPosition(b,f)),f=this.values[b],h!==f&&this._emitThumbChangeEvent({index:b,oldValue:h,value:f});else if(c===w.moveAnchorToMax||c===w.moveAnchorToMin){a.preventDefault();const {min:q,max:n}=this._getAnchorBoundsInPixels(b);this._toPosition(b,k?c===w.moveAnchorToMax?n:q:c===w.moveAnchorToMin?n:q);f=
this.values[b];h!==f&&this._emitThumbChangeEvent({index:b,oldValue:h,value:f})}}};d._onAnchorPointerDown=function(a){if(!this._isDisabled()){var {target:b,clientX:c,clientY:e}=a,g=b["data-thumb-index"];void 0!==g&&(a.preventDefault(),this._anchorElements[g]&&this._anchorElements[g].focus(),this._storeTrackDimensions(),this._dragStartInfo={clientX:c,clientY:e,index:g,position:this._getPositionOfElement(this._anchorElements[g])},this.notifyChange("state"),document.addEventListener("pointerup",this._onAnchorPointerUp),
document.addEventListener("pointermove",this._onAnchorPointerMove))}};d._onAnchorPointerMove=function(a){if("editing"!==this.state&&this._dragStartInfo){a.preventDefault();var {values:b,_anchorElements:c,_dragged:e,_dragStartInfo:g,_dragStartInfo:{index:f,position:h}}=this,{clientX:k,clientY:p}=a;a=e?"drag":"start";var q=this._getPositionOfElement(c[f]),n=this._applyPrecisionToPosition(this._isHorizontalLayout()?h+k-g.clientX:h+p-g.clientY);q!==n&&(q=b[f],this._dragged=!0,this._toPosition(f,n),n=
this.values[f],e?q!==n&&this._emitThumbDragEvent({index:f,state:a,value:n}):this._emitThumbDragEvent({index:f,state:a,value:q}))}};d._onAnchorPointerUp=function(a){document.removeEventListener("pointerup",this._onAnchorPointerUp);document.removeEventListener("pointermove",this._onAnchorPointerMove);if(this._dragStartInfo){a.preventDefault();({index:a}=this._dragStartInfo);var b=this._dragged;this._dragged=!1;this._dragStartInfo=null;this._lastMovedHandleIndex=a;b?(this.notifyChange("state"),this._emitThumbDragEvent({index:a,
state:"stop",value:this.values[a]})):this.scheduleRender()}};d._onTrackPointerDown=function(a){const {_dragStartInfo:b,snapOnClickEnabled:c,state:e,values:g}=this;if(!this._isDisabled()&&"editing"!==e&&!b&&c&&g.length){var {steps:f}=this,{clientX:h,clientY:k}=a,p=this._getCursorPositionFromEvent(a);a=this._valueFromPosition(p);a=this._getIndexOfNearestValue(a);if(r.isSome(a)){var q=g[a];f=r.isSome(f)?this._calculateNearestStepPosition(p):p;this._toPosition(a,f);this._dragged=!0;this._dragStartInfo=
{clientX:h,clientY:k,index:a,position:f};this._focusedAnchorIndex=a;this.notifyChange("state");this._emitThumbDragEvent({index:a,state:"start",value:q});f=this.values[a];q!==f&&this._emitThumbDragEvent({index:a,state:"drag",value:f});document.addEventListener("pointerup",this._onAnchorPointerUp);document.addEventListener("pointermove",this._onAnchorPointerMove)}}};d._onSegmentPointerDown=function(a){a.preventDefault();const {draggableSegmentsEnabled:b}=this;var c=a.target;const e=c["data-segment-index"],
g=c["data-min-thumb-index"];c=c["data-max-thumb-index"];!this._isDisabled()&&b&&r.isSome(g)&&r.isSome(c)&&(a.stopPropagation(),this._storeTrackDimensions(),this._segmentDragStartInfo={cursorPosition:this._getCursorPositionFromEvent(a),index:e,details:this._normalizeSegmentDetails({min:this._getAnchorDetails(g),max:this._getAnchorDetails(c)})},this.notifyChange("state"),this._emitSegmentDragEvent({index:e,state:"start",thumbIndices:[g,c]}),document.addEventListener("pointerup",this._onSegmentPointerUp),
document.addEventListener("pointermove",this._onSegmentPointerMove))};d._onSegmentPointerMove=function(a){if(this._segmentDragStartInfo){a.preventDefault();var {_trackHeight:b,_trackWidth:c,_segmentDragStartInfo:{index:e,cursorPosition:g,details:{min:f,max:h}}}=this,{index:k,position:p,value:q}=f,{index:n,position:A,value:D}=h;this._dragged=!0;a=this._getCursorPositionFromEvent(a);if(a!==g){var v=this._positionToPercent(g);v=this._positionToPercent(a)-v;a=this._positionToPercent(p)+v;v=this._positionToPercent(A)+
v;var {min:C}=this._getAnchorBoundsAsPercents(k),{max:x}=this._getAnchorBoundsAsPercents(n),I=!1,J=!1;a<C?I=!0:v>x&&(J=!0);if(I){const {min:E,max:F}=this.viewModel.getBoundsForValueAtIndex(k);a=this._isPositionInverted()?F:E;this._updateAnchorValues([k,n],[a,D+(a-q)])}else if(J){const {min:E,max:F}=this.viewModel.getBoundsForValueAtIndex(n);a=this._isPositionInverted()?E:F;this._updateAnchorValues([k,n],[q+(a-D),a])}else{C=this._isHorizontalLayout()?c:b;v=v/100*C;x=this.values;var W=[x[k],x[n]];a=
this._getValueForAnchorAtPosition(k,a/100*C);v=this._getValueForAnchorAtPosition(n,v);this._updateAnchorValues([k,n],[a,v]);[this.values[k],this.values[n]].every((E,F)=>E===W[F])||this._emitSegmentDragEvent({index:e,state:"drag",thumbIndices:[k,n]})}}}};d._onSegmentPointerUp=function(a){a.preventDefault();document.removeEventListener("pointerup",this._onSegmentPointerUp);document.removeEventListener("pointermove",this._onSegmentPointerMove);if(this._segmentDragStartInfo){var {max:b,min:c,values:e}=
this,{index:g,details:{min:{index:f},max:{index:h}}}=this._segmentDragStartInfo;a=e[f];this._lastMovedHandleIndex=a===e[h]?a>(b-c)/2?f:h:null;this._dragged=!1;this._segmentDragStartInfo=null;this.notifyChange("state");this._emitSegmentDragEvent({index:g,state:"stop",thumbIndices:[f,h]})}};d._storeTrackDimensions=function(){if(this.trackElement){const a=this._getDimensions(this.trackElement);this._trackHeight=a.height;this._trackWidth=a.width}};d._onLabelPointerDown=function(){this._isDisabled()||
(this._dragged=!1,document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove))};d._onLabelPointerMove=function(){this._isDisabled()||(this._dragged=!0)};d._onLabelPointerUp=function(a){this._isDisabled()||(a=a.target["data-thumb-index"],this.labelInputsEnabled&&!this._dragged&&r.isSome(a)&&(this._activeLabelInputIndex=a),this._dragged=!1,this.notifyChange("state"),document.removeEventListener("pointerup",this._onLabelPointerUp),
document.removeEventListener("pointermove",this._onLabelPointerMove))};d._onLabelInputBlur=function(a){const {_activeLabelInputIndex:b,values:c,viewModel:e}=this;a=a.target.value;this._activeLabelInputIndex=null;this.notifyChange("state");if(a){var g=this._parseInputValue(a,"value",b);a=c[b];var {min:f,max:h}=this.viewModel.getBoundsForValueAtIndex(b);g<f||g>h||(e.setValue(b,g),g=this.values[b],a!==g&&this._emitThumbChangeEvent({index:b,oldValue:a,value:g}))}};d._onInputKeyDown=function(a){if(!this._isDisabled()){var {target:b}=
a,c=G.eventKey(a),{hideInput1:e,hideInput2:g,hideInput3:f}=w,{_activeLabelInputIndex:h,_anchorElements:k}=this;if(c===e||c===g||c===f)a.stopPropagation(),b.blur(),r.isSome(h)?k[h].focus():b.parentElement.focus()}};d._onMaxLabelClick=function(){!this._isDisabled()&&this.rangeLabelInputsEnabled&&(this._isMaxInputActive=!0,this.notifyChange("state"))};d._onMaxLabelKeyDown=function(a){this._isDisabled()||G.eventKey(a)!==w.showInput||(this._isMaxInputActive=!0,this.notifyChange("state"))};d._onMaxInputBlur=
function(a){var b=a.target.value;this._isMaxInputActive=!1;this.notifyChange("state");b&&(a=this.max,b=this._parseInputValue(b,"max"),b<=this.min||(this.viewModel.set("max",b),this.max!==a&&this._emitMaxChangeEvent({oldValue:a,value:this.max})))};d._onMinLabelClick=function(){!this._isDisabled()&&this.rangeLabelInputsEnabled&&(this._isMinInputActive=!0,this.notifyChange("state"))};d._onMinLabelKeyDown=function(a){this._isDisabled()||G.eventKey(a)!==w.showInput||(this._isMinInputActive=!0,this.notifyChange("state"))};
d._onMinInputBlur=function(){var a=event.target.value;this._isMinInputActive=!1;this.notifyChange("state");if(a){var b=this.min;a=this._parseInputValue(a,"min");a>=this.max||(this.viewModel.set("min",a),this.min!==b&&this._emitMinChangeEvent({oldValue:b,value:this.min}))}};d._isDisabled=function(){return this.disabled||"disabled"===this.state};d._positionFromValue=function(a){const {max:b,min:c}=this,e=b-c;if(0===e)return 0;const {_trackHeight:g,_trackWidth:f}=this,h=this._isHorizontalLayout();a=
h?parseFloat((f*(a-c)/e).toFixed(2)):parseFloat((g*(b-a)/e).toFixed(2));this._isReversedLayout()&&(a=h?f-a:g-a);return a};d._valueFromPosition=function(a){const {_trackHeight:b,_trackWidth:c,max:e,min:g,precision:f}=this,h=e-g;a=this._isHorizontalLayout()?a*h/c+g:h*(1E3-a/b*1E3)/1E3+g;this._isReversedLayout()&&(a=e+g-a);return parseFloat(a.toFixed(f))};d._positionToPercent=function(a){const {_trackHeight:b,_trackWidth:c}=this,e=this._isHorizontalLayout()?c:b;return this._applyPrecisionToPosition(100*
a/e)};d._applyPrecisionToPosition=function(a){return parseFloat(a.toFixed(this._positionPrecision))};d._isPositionInverted=function(){const {layout:a}=this;return"horizontal-reversed"===a||"vertical"===a};d._isHorizontalLayout=function(){return-1<this.layout.indexOf("horizontal")};d._isReversedLayout=function(){return-1<this.layout.indexOf("reversed")};d._normalizeSegmentDetails=function(a){if(this._isPositionInverted()){const {min:b,max:c}=a;return{min:c,max:b}}return a};d._parseInputValue=function(a,
b,c){return this.inputParseFunction?this.inputParseFunction(a,b,c):this.viewModel.defaultInputParseFunction(a)};d._formatInputValue=function(a,b,c){return this.inputFormatFunction?this.inputFormatFunction(a,b,c):this.viewModel.defaultInputFormatFunction(a)};d._getAnchorDetails=function(a){const b=this._getPositionOfElement(this._anchorElements[a]);return{index:a,position:b,value:this.values[a]}};d._updateAnchorStyle=function(a,b){if(a=this._anchorElements[a])this._isHorizontalLayout()?a.style.left=
`${b}`:a.style.top=`${b}`};d._getStyleForAnchor=function(a,b,c){a=this._getPositionStyleForElement(a);if(1===this.values.length)return`${a}`;b=this._zIndices[b];return`${a}; z-index: ${c?this._zIndexOffset+b:b}`};d._getPositionStyleForElement=function(a){a=this._positionFromValue(a);a=this._positionToPercent(a);return`${this._isHorizontalLayout()?"left":"top"}: ${a+"%"}`};d._getPositionOfElement=function(a){const b=this._getDimensions(a.offsetParent);a=this._getDimensions(a);return this._isHorizontalLayout()?
this._applyPrecisionToPosition(a.left-b.left):this._applyPrecisionToPosition(a.top-b.top)};d._updateAnchorValues=function(a,b){a.forEach((c,e)=>this._toValue(c,b[e]))};d._toValue=function(a,b){if(r.isSome(this.steps)){const c=this._getStepValues();b=this._getIndexOfNearestStepValue(b);b=c[b]}this._updateAnchorStyle(a,this._getPositionStyleForElement(b));this.viewModel.setValue(a,b)};d._toPosition=function(a,b){b=r.isSome(this.steps)?this._getStepValueForAnchorAtPosition(a,b):this._getValueForAnchorAtPosition(a,
b);this._updateAnchorStyle(a,this._getPositionStyleForElement(b));this.viewModel.setValue(a,b)};d._getValueForAnchorAtPosition=function(a,b){const {min:c,max:e}=this._getAnchorBoundsInPixels(a),{min:g,max:f}=this.viewModel.getBoundsForValueAtIndex(a);a=null;let h;this._isPositionInverted()?(a=g,h=f):(a=f,h=g);a=b>e?a:b<c?h:this._valueFromPosition(b);a>f?a=f:a<g&&(a=g);return a};d._getStepValueForAnchorAtPosition=function(a,b){const c=this._getStepValues();b=this._calculateNearestStepPosition(b);a=
this._getValueForAnchorAtPosition(a,b);a=this._getIndexOfNearestStepValue(a);return c[a]};d._getAnchorBoundsAsPercents=function(a){const {min:b,max:c}=this._getAnchorBoundsInPixels(a);return{min:this._positionToPercent(b),max:this._positionToPercent(c)}};d._getAnchorBoundsInPixels=function(a){const {_anchorElements:b,_trackHeight:c,_trackWidth:e,thumbsConstrained:g}=this,f=b[a-1];a=b[a+1];const h=this._isHorizontalLayout()?e:c;return g?this._isPositionInverted()?{max:f?this._getPositionOfElement(f):
h,min:a?this._getPositionOfElement(a):0}:{max:a?this._getPositionOfElement(a):h,min:f?this._getPositionOfElement(f):0}:{max:h,min:0}};d._getIndexOfNearestValue=function(a){return this.values.indexOf(this.values.reduce((b,c)=>Math.abs(c-a)<Math.abs(b-a)?c:b))};d._getCursorPositionFromEvent=function(a){const b=this._getDimensions(this.trackElement);return this._isHorizontalLayout()?a.clientX-b.left:a.clientY-b.top};d._getStepValues=function(){const {steps:a}=this;if(Array.isArray(a))return a;const {max:b,
min:c}=this,e=Math.ceil((b-c)/a),g=[];for(let f=0;f<=e;f++){const h=c+a*f;g.push(h>b?b:h)}return g};d._toStep=function(a,b){const {values:c,viewModel:e}=this;var g=c[a];const f=this._getStepValues(),h=f.indexOf(g);let k=null;-1<h?(b=this._positionFromValue(f[h+b]),k=this._getStepValueForAnchorAtPosition(a,b)):(g=this._getIndexOfNearestStepValue(g),k=f[g+b]);e.setValue(a,k)};d._getIndexOfNearestStepValue=function(a){var {steps:b}=this;if(!r.isSome(b))return null;b=this._getStepValues();const c=b.reduce((e,
g)=>Math.abs(g-a)<Math.abs(e-a)?g:e);return b.indexOf(c)};d._calculateNearestStepPosition=function(a){a=this._valueFromPosition(a);a=this._getIndexOfNearestStepValue(a);const b=this._getStepValues();return this._positionFromValue(b[a])};d._getTickCounts=function(a,b){({mode:b}=b);return"count"===b||"position"===b?a||0:"percent"===b?100/a||0:0};d._calculateTickPositions=function(a){return a.map(b=>this._positionFromValue(b))};d._calculateEquidistantTickPositions=function(a){const {_trackWidth:b,_trackHeight:c}=
this,e=this._isHorizontalLayout()?b:c,g=e/(a-1),f=[];if(1===a)return[e/2];for(let h=0;h<a;h++){const k=h*g;k<=e&&f.push(k)}return f};d._getDimensions=function(a){try{return a.getBoundingClientRect()}catch(b){if("object"===typeof b&&null!==b)return{top:0,bottom:0,left:0,width:0,height:0,right:0};throw b;}};d._emitMaxChangeEvent=function(a){this.emit("max-change",{...a,type:"max-change"})};d._emitMinChangeEvent=function(a){this.emit("min-change",{...a,type:"min-change"})};d._emitThumbChangeEvent=function(a){this.emit("thumb-change",
{...a,type:"thumb-change"})};d._emitThumbDragEvent=function(a){this.emit("thumb-drag",{...a,type:"thumb-drag"})};d._emitSegmentDragEvent=function(a){this.emit("segment-drag",{...a,type:"segment-drag"})};y._createClass(H,[{key:"labelsVisible",set:function(a){K.deprecatedProperty(M,"labelsVisible",{replacement:"visibleElements.labels",version:"4.15"});this.visibleElements={...this.visibleElements,labels:a}}},{key:"layout",set:function(a){-1===["vertical","vertical-reversed","horizontal","horizontal-reversed"].indexOf(a)&&
(a="horizontal");this._set("layout",a)}},{key:"rangeLabelsVisible",set:function(a){K.deprecatedProperty(M,"rangeLabelsVisible",{replacement:"visibleElements.rangeLabels",version:"4.15"});this.visibleElements={...this.visibleElements,rangeLabels:a}}},{key:"state",get:function(){const {_activeLabelInputIndex:a,_isMaxInputActive:b,_isMinInputActive:c,_dragStartInfo:e,_segmentDragStartInfo:g,viewModel:f}=this,h=r.isSome(e)||r.isSome(g);return null!==a||b||c?"editing":h?"dragging":f.state}}]);return H}(U);
m.__decorate([t.property(),z.renderable()],l.prototype,"disabled",void 0);m.__decorate([t.property()],l.prototype,"extraNodes",void 0);m.__decorate([t.property(),z.renderable()],l.prototype,"draggableSegmentsEnabled",void 0);m.__decorate([t.property()],l.prototype,"inputCreatedFunction",void 0);m.__decorate([B.aliasOf("viewModel.inputFormatFunction")],l.prototype,"inputFormatFunction",void 0);m.__decorate([B.aliasOf("viewModel.inputParseFunction")],l.prototype,"inputParseFunction",void 0);m.__decorate([t.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],l.prototype,"label",void 0);m.__decorate([t.property()],l.prototype,"labelInputsEnabled",void 0);m.__decorate([B.aliasOf("viewModel.labelFormatFunction")],l.prototype,"labelFormatFunction",void 0);m.__decorate([B.aliasOf("viewModel.labels")],l.prototype,"labels",void 0);m.__decorate([t.property(),z.renderable()],l.prototype,"labelsVisible",null);m.__decorate([t.property({value:"horizontal"}),z.renderable()],l.prototype,"layout",null);m.__decorate([B.aliasOf("viewModel.max")],l.prototype,
"max",void 0);m.__decorate([t.property(),z.renderable(),T.messageBundle("esri/widgets/Slider/t9n/Slider")],l.prototype,"messages",void 0);m.__decorate([B.aliasOf("viewModel.min")],l.prototype,"min",void 0);m.__decorate([B.aliasOf("viewModel.precision")],l.prototype,"precision",void 0);m.__decorate([t.property()],l.prototype,"rangeLabelInputsEnabled",void 0);m.__decorate([t.property(),z.renderable()],l.prototype,"rangeLabelsVisible",null);m.__decorate([t.property()],l.prototype,"snapOnClickEnabled",
void 0);m.__decorate([t.property({dependsOn:["viewModel.state"],readOnly:!0}),z.renderable()],l.prototype,"state",null);m.__decorate([t.property(),z.renderable()],l.prototype,"steps",void 0);m.__decorate([B.aliasOf("viewModel.thumbsConstrained")],l.prototype,"thumbsConstrained",void 0);m.__decorate([t.property()],l.prototype,"thumbCreatedFunction",void 0);m.__decorate([t.property(),z.renderable()],l.prototype,"tickConfigs",void 0);m.__decorate([t.property()],l.prototype,"trackElement",void 0);m.__decorate([B.aliasOf("viewModel.values")],
l.prototype,"values",void 0);m.__decorate([t.property(),z.renderable("viewModel.thumbsConstrained viewModel.max viewModel.min viewModel.precision viewModel.labelFormatFunction viewModel.labels viewModel.values".split(" "))],l.prototype,"viewModel",void 0);m.__decorate([t.property(),z.renderable()],l.prototype,"visibleElements",void 0);m.__decorate([Q.cast("visibleElements")],l.prototype,"castVisibleElements",null);return l=m.__decorate([R.subclass("esri.widgets.Slider")],l)});