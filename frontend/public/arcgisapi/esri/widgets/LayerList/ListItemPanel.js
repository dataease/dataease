// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Identifiable ../../core/Handles ../../core/watchUtils ../support/decorators/renderable ../../chunks/index ../support/widget ../Widget".split(" "),function(u,
m,f,e,z,A,g,B,v,C,D,E,w,x,n,p,h,q,y){e=function(r){function l(a,b){a=r.call(this,a,b)||this;a._legend=null;a._handles=new x;a.content=null;a.image=null;a.listItem=null;a.open=!1;a.visible=!0;return a}m._inheritsLoose(l,r);var d=l.prototype;d.initialize=function(){this.own([n.init(this,"content",a=>this._createLegend(a))])};d.destroy=function(){const {_legend:a}=this;a&&a.destroy();this._legend=null};d.render=function(){return h.jsx("div",{class:"esri-layer-list-panel"},this._renderContents())};d._renderContent=
function(a){const {_legend:b,listItem:c}=this;return a?"legend"===a?c&&c.view&&c.layer&&b?h.jsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:b},b.render()):null:"string"===typeof a?h.jsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:a,innerHTML:a}):q.isWidget(a)?h.jsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),key:a},a.render()):
a instanceof HTMLElement?h.jsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:a,bind:a,afterCreate:this._attachToNode}):null:null};d._renderContents=function(){const {content:a}=this;return Array.isArray(a)?a.map(b=>this._renderContent(b)):this._renderContent(a)};d._getLegendOptions=function(a){if(a){var {layer:b,view:c}=a;if(b&&c)return{view:c,layerInfos:[{layer:b,title:""}]}}};d._createLegend=function(a){this._hasLegend(a)&&!this._legend&&
(new Promise(function(b,c){u(["../Legend"],function(k){b(Object.freeze({__proto__:null,"default":k}))},c)})).then(({default:b})=>{const {_handles:c,listItem:k}=this,t=new b(this._getLegendOptions(k));this._legend=t;this.notifyChange("className");this.notifyChange("title");b=n.init(this,["listItem.view","listItem.layer"],()=>this._updateLegend(t));c.add(b,"legends");this.scheduleRender()})};d._hasLegend=function(a){return"legend"===a?!0:Array.isArray(a)?a.some(b=>"legend"===b):!1};d._attachToNode=
function(a){a.appendChild(this)};d._updateLegend=function(a){const {listItem:b}=this;if(b){var {layer:c,view:k}=b;a.view=k;a.layerInfos=[{layer:c,title:null}];this.scheduleRender()}};d._getWidget=function(a){return"legend"===a?this._legend:q.isWidget(a)?a:null};d._getFirstWidget=function(){const {content:a}=this;if(Array.isArray(a)){let b=null;a.some(c=>{(c=this._getWidget(c))&&(b=c);return!!c});return b}return this._getWidget(a)};m._createClass(l,[{key:"className",get:function(){const {image:a}=
this,b=this._getFirstWidget();return this._get("className")||!a&&b?b.iconClass:""},set:function(a){void 0===a?this._clearOverride("className"):this._override("className",a)}},{key:"title",get:function(){const a=this._getFirstWidget();return this._get("title")||a?a.label:""},set:function(a){void 0===a?this._clearOverride("title"):this._override("title",a)}}]);return l}(w.IdentifiableMixin(y));f.__decorate([g.property({dependsOn:["content","image"]})],e.prototype,"className",null);f.__decorate([g.property(),
p.renderable()],e.prototype,"content",void 0);f.__decorate([g.property()],e.prototype,"image",void 0);f.__decorate([g.property()],e.prototype,"listItem",void 0);f.__decorate([g.property({dependsOn:["content"]})],e.prototype,"title",null);f.__decorate([g.property(),p.renderable()],e.prototype,"open",void 0);f.__decorate([g.property()],e.prototype,"visible",void 0);return e=f.__decorate([v.subclass("esri.widgets.LayerList.ListItemPanel")],e)});