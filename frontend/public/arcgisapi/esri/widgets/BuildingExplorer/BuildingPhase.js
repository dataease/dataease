// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./support/buildingLayerUtils ./support/validation ./BuildingNumericFilterViewModel ./support/filterUtils".split(" "),function(l,f,e,k,w,x,g,y,r,z,A,B,m,t,u,
v){e=function(n){function h(){var a=n.apply(this,arguments)||this;a._createdPhaseFieldName=null;a._demolishedPhaseFieldName=null;a._parseValueFromFilter=b=>{var c=a._createdPhaseFieldName;c=new RegExp(`${c}\\s*<=\\s*(\\d+)\\s*OR\\s*${c}\\s*IS\\s*NULL`,"gi");var d=a._demolishedPhaseFieldName;d=new RegExp(`${d}\\s*>\\s*(\\d+)\\s*OR\\s*${d}\\s*IS\\s*NULL`,"gi");for(const {filterExpression:p}of b.filterBlocks.items){var q;if(b=null!=(q=c.exec(p))?q:d.exec(p))return parseInt(b[1],10)}return null};return a}
l._inheritsLoose(h,n);h.prototype._setup=function(){const a=[];this.layers.forEach(c=>{const d=m.findFieldInfoByModelName(c,"createdphase");k.isSome(d)&&(this._createdPhaseFieldName=d.fieldName,a.push(d));c=m.findFieldInfoByModelName(c,"demolishedphase");k.isSome(c)&&(this._demolishedPhaseFieldName=c.fieldName,a.push(c))});this._domainInfo=t.getDomainInfo(a);const b=v.getValueFromFilters(this.layers,this._parseValueFromFilter);0<this.allowedValues.length?this.select(k.isSome(b)?b:this._lastValue):
this.clear()};l._createClass(h,[{key:"filterExpressions",get:function(){if(!this.enabled)return{solid:null,xRay:null};var a=[],b=this._createdPhaseFieldName;b&&a.push(`(${b} <= ${this.value} OR ${b} IS NULL)`);(b=this._demolishedPhaseFieldName)&&a.push(`(${b} > ${this.value} OR ${b} IS NULL)`);a=a.join(" AND ");return{solid:a,xRay:a}}},{key:"_lastValue",get:function(){const a=this.allowedValues;return 0<a.length?a[a.length-1]:0}}]);return h}(u);f.__decorate([g.property({readOnly:!0,dependsOn:["enabled",
"value","_createdPhaseFieldName","_demolishedPhaseFieldName"]})],e.prototype,"filterExpressions",null);f.__decorate([g.property()],e.prototype,"_createdPhaseFieldName",void 0);f.__decorate([g.property()],e.prototype,"_demolishedPhaseFieldName",void 0);f.__decorate([g.property({readOnly:!0,dependsOn:["allowedValues.length"]})],e.prototype,"_lastValue",null);return e=f.__decorate([r.subclass("esri.widgets.BuildingExplorer.BuildingPhase")],e)});