// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../Slider/SliderViewModel ./support/utils".split(" "),function(v,f,e,h,C,D,k,E,y,F,G,H,z,A){e=function(w){function p(a){var b=w.call(this,a)||this;b._max=null;
b._min=null;b.stops=null;b.hasTimeData=!1;b.inputFormatFunction=(d,c)=>"max"===c?b.getUnzoomedMax().toString():"min"===c?b.getUnzoomedMin().toString():d.toString();b.inputParseFunction=null;b.labelFormatFunction=d=>b.hasTimeData?A.formatDateLabel(d):b.defaultLabelFormatFunction(d);b.zoomingEnabled=!0;return b}v._inheritsLoose(p,w);var m=p.prototype;m.getStopIndexFromValueIndex=function(a){const {stops:b}=this;return 0===a?0:b.length-1};m.getStopChanges=function(a,b){const {max:d,min:c,stops:g,values:n}=
this,t=this.getStopIndexFromValueIndex(a),q=0===a?c:n[a-1];a=a===n.length-1?d:n[a+1];const l=g.map(r=>r.hasOwnProperty("ratio")?r.ratio:r.value);l[t]=Math.max(Math.min(b,a),q);const u=l[l.length-1]-l[0],B=g.length-1;return l.map((r,x)=>({index:x,value:this.toPrecision(l[0]+x*u/B)}))};m.getValuesFromStops=function(){var a;return null==(a=this.stops)?void 0:a.map(b=>b.hasOwnProperty("ratio")?b.ratio:b.value)};m.updateStops=function(a){const {stops:b}=this,d=this.getValuesFromStops();for(const c of a)d[c.index]=
c.value;b.forEach((c,g)=>{c.hasOwnProperty("ratio")?c.ratio=d[g]:c.value=d[g]})};m.getUnzoomedMax=function(){return this.zoomOptions&&h.isSome(this._max)?this._max:this.max};m.getUnzoomedMin=function(){return this.zoomOptions&&h.isSome(this._min)?this._min:this.min};m._storeZoomMax=function(a,b){this._max=b;this.setMax(a)};m._storeZoomMin=function(a,b){this._min=b;this.setMin(a)};v._createClass(p,[{key:"labels",get:function(){var {values:a}=this;a=a&&a.length?a.map((c,g)=>this.getLabelForValue(c,
"value",g)):[];const b=this.getUnzoomedMax(),d=this.getUnzoomedMin();return{max:this.getLabelForValue(b,"max"),min:this.getLabelForValue(d,"min"),values:a}}},{key:"max",set:function(a){var {zoomOptions:b}=this;if(b&&h.isSome(b.max)){const d=this.values;let c=b.max;a<c&&(c=a,b.max=a);if(d&&d.length)for(b=0;b<d.length;b++)a<d[b]&&this.setValue(b,a);this._storeZoomMax(c,a)}else this.setMax(a);this.notifyChange("labels")}},{key:"min",set:function(a){var {zoomOptions:b}=this;if(b&&h.isSome(b.min)){const d=
this.values;let c=b.min;a>c&&(c=a,b.min=a);if(d&&d.length)for(b=0;b<d.length;b++)a>d[b]&&this.setValue(b,a);this._storeZoomMin(c,a)}else this.setMin(a);this.notifyChange("labels")}},{key:"state",get:function(){const {max:a,min:b,values:d}=this;return h.isSome(a)&&h.isSome(b)&&0<d.length?"ready":"disabled"}},{key:"values",get:function(){var {stops:a}=this;if(!a||!a.length||2>a.length)return[];a=this.getValuesFromStops();return[a[0],a[a.length-1]]}},{key:"zoomOptions",set:function(a){const {zoomingEnabled:b,
zoomOptions:d}=this;if(b){if(d){var c=h.isSome(this._max)?this._max:this.max;const g=h.isSome(this._min)?this._min:this.min;if(a){const {max:n,min:t}=a,q=h.isSome(n),l=h.isSome(t),u=q?a.max:c;c=q?c:null;this._storeZoomMin(l?a.min:g,l?g:null);this._storeZoomMax(u,c)}else this.setMax(c),this.setMin(g),this._max=this._min=null}else if(a){const {max:g,min:n}=a;h.isSome(n)&&this._storeZoomMin(a.min,this.min);h.isSome(g)&&this._storeZoomMax(a.max,this.max)}this._set("zoomOptions",a);this.notifyChange("max");
this.notifyChange("min")}}}]);return p}(z);f.__decorate([k.property()],e.prototype,"stops",void 0);f.__decorate([k.property()],e.prototype,"hasTimeData",void 0);f.__decorate([k.property()],e.prototype,"inputFormatFunction",void 0);f.__decorate([k.property()],e.prototype,"inputParseFunction",void 0);f.__decorate([k.property()],e.prototype,"labelFormatFunction",void 0);f.__decorate([k.property({dependsOn:["labelFormatFunction","max","min","values","values.length"],readOnly:!0})],e.prototype,"labels",
null);f.__decorate([k.property()],e.prototype,"max",null);f.__decorate([k.property()],e.prototype,"min",null);f.__decorate([k.property({dependsOn:["max","min","values","values.length"],readOnly:!0})],e.prototype,"state",null);f.__decorate([k.property({dependsOn:["stops","stops.length"],readOnly:!0})],e.prototype,"values",null);f.__decorate([k.property()],e.prototype,"zoomingEnabled",void 0);f.__decorate([k.property()],e.prototype,"zoomOptions",null);return e=f.__decorate([y.subclass("esri.widgets.smartMapping.SmartMappingSliderViewModel")],
e)});