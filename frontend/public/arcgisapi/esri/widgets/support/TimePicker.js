// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/aliasOf ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/events ../../intl/date ../../intl ../../intl/moment ./widgetUtils ./decorators/messageBundle ./decorators/renderable ../../chunks/index ../Widget ./TimePickerViewModel".split(" "),
function(z,k,h,H,I,q,A,J,B,K,L,M,C,n,N,D,O,E,t,u,F,v){const p={hour:"numeric",minute:"numeric"},G=["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","Tab"];h=function(w){function r(a,b){a=w.call(this,a,b)||this;a._activeTime=null;a.label=void 0;a.messages=null;a.value=null;a.viewModel=new v;return a}z._inheritsLoose(r,w);var e=r.prototype;e.loadLocale=async function(){this._moment=await D.loadMoment()};e.render=function(){const a=this._activeTime||this.viewModel.value;return u.jsx("div",{class:"esri-time-picker esri-widget"},
u.jsx("input",{afterUpdate:this._handleInputUpdate,"aria-label":this.messages.inputTitle,bind:this,class:this.classes("esri-time-picker__input","esri-input"),onblur:this._handleInputBlur,onfocus:this._handleInputFocus,onkeydown:this._handleInputKeydown,onclick:this._handleInputClick,onpaste:this._handleInputPaste,onwheel:this._handleInputWheel,value:n.formatDate(a.valueOf(),p)}))};e._handleInputBlur=function(){this._activeTime.isValid()&&(this.viewModel.value=this._activeTime.toDate());this._activePart=
this._activeTime=null};e._handleInputUpdate=function(a){this._selectPart(a,this._activePart)};e._selectPart=function(a,b){var c=this._activeTime;if(c){c=n.formatDate(c.valueOf(),p);var f=c.indexOf(":");if("hours"===b)a.setSelectionRange(0,f);else{var d=f+1;f=d+2;"minutes"===b?a.setSelectionRange(d,f):(c=c.length,"meridiem"===b&&a.setSelectionRange(f+1,c))}}};e._handleInputFocus=function(a){this._activePart="hours";this._activeTime=this._moment(this.viewModel.value).startOf("minute");this._selectPart(a.target,
"hours")};e._caretIndexToPartName=function(a){var b=this._activeTime.format("LT");const c=b.indexOf(":");b=b.indexOf(" ");return a<=c?"hours":a>c&&a<=b?"minutes":"meridiem"};e._handleInputKeydown=function(a){const {ctrlKey:b,metaKey:c,shiftKey:f}=a;var d=C.eventKey(a),g=this._activeTime;const l=this._activePart;var m=/\d/.test(d);const x=/^a|p$/i.test(d),y=c||b;if(-1<G.indexOf(d)||m||"meridiem"===l&&x&&!y){if("ArrowLeft"===d)this._activePart=this._prevPart();else if("ArrowRight"===d)this._activePart=
this._nextPart();else if("Tab"===d){g=f?this._prevPart():this._nextPart();if(g===this._activePart)return;this._activePart=g}else"ArrowUp"===d?this._shift("up",g,l):"ArrowDown"===d?this._shift("down",g,l):m?this._setTime(g,l,Number(d)):x&&(d=d.toLowerCase(),m=g.hour(),("a"===d&&12<=m||"p"===d&&12>m)&&this._shift("up",g,l));a.preventDefault();a.stopImmediatePropagation()}else y||(a.preventDefault(),a.stopImmediatePropagation())};e._handleInputClick=function(a){a=a.target;this._activePart=null;this.renderNow();
this._activePart=this._caretIndexToPartName(a.selectionStart)};e._getOrderedParts=function(){return-1<n.formatDate(this._activeTime.valueOf(),p).indexOf(" ")?["hours","minutes","meridiem"]:["hours","minutes"]};e._prevPart=function(){const a=this._getOrderedParts(),b=a.indexOf(this._activePart)-1;return a[Math.max(b,0)]};e._nextPart=function(){const a=this._getOrderedParts(),b=a.indexOf(this._activePart)+1;return a[Math.min(b,a.length-1)]};e._setTime=function(a,b,c){if("hours"===b){b=-1<n.formatDate(a.valueOf(),
p).indexOf(" ")?12:24;var f=`${a.hour()%b}`;const d=Number(`${f}${c}`);2===f.length||d>b?a.hour(c):d<=b&&a.hour(d)}else"minutes"===b&&(b=`${a.minute()}`,f=Number(`${b}${c}`),2===b.length||59<f?a.minute(c):59>f&&a.minute(f))};e._handleInputPaste=function(a){var b=a.clipboardData.getData("text/plain");b=this._moment(b);b.isValid()&&(this._activeTime=b);a.preventDefault();a.stopImmediatePropagation()};e._handleInputWheel=function(a){this._shift(0>a.deltaY?"up":"down",this._activeTime,this._activePart)};
e._shift=function(a,b,c){if(a&&b&&c)b["up"===a?"add":"subtract"]("meridiem"===c?12:1,"hours"===c?"hour":"minutes"===c?"minute":"hours")};return r}(F);k.__decorate([q.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],h.prototype,"label",void 0);k.__decorate([q.property(),t.renderable(),E.messageBundle("esri/widgets/support/t9n/TimePicker")],h.prototype,"messages",void 0);k.__decorate([A.aliasOf("viewModel.value")],h.prototype,"value",void 0);k.__decorate([q.property({type:v}),t.renderable("viewModel.value")],
h.prototype,"viewModel",void 0);return h=k.__decorate([B.subclass("esri.widgets.support.TimePicker")],h)});