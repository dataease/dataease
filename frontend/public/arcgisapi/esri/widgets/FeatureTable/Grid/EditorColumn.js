// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ./Column".split(" "),function(t,g,f,x,y,k,z,v,A,B,C,w){f=function(u){function r(l){var a=u.call(this,l)||this;a.activeEditInfo=null;a.cellValueValidatorFunction=
({oldValue:b,value:d})=>b!==d;a.editable=!1;a.inputRenderFunction=({root:b,column:d,rowData:e})=>{var c,m;if((null==(c=a.activeEditInfo)||!c.updating)&&a.editable){var h=a.getCellValue(d,e);c=a.createInputElement({root:b,column:d,rowData:e,value:h});a._set("activeEditInfo",{column:d,input:c,root:b,rowData:e,updating:!0,oldValue:h});d=a.createInputContainer();d.appendChild(c);a.removeCellContent(b);b.appendChild(d);c.focus();c instanceof HTMLInputElement&&c.select();null==(m=a.grid)?void 0:m.notifyResize()}};
a.loadingMessage="";a.inputType="text";a.maxLength=null;a.parseInputValueFunction=({input:b})=>b.value;a.renderFunction=b=>{var d;const {root:e,column:c,rowData:m}=b;var {activeEditInfo:h}=t._assertThisInitialized(a);if(!h||!h.updating){h=a.getCellValue(c,m);h=a.cellValueFormatFunction({column:c,rowData:m,value:h});e.onclick=()=>e.focus();e.ondblclick=()=>a.inputRenderFunction(b);e.ontouchend=()=>a.inputRenderFunction(b);var n=null==(d=a.grid)?void 0:d.getSlotElementByName(e.slot);if(d=null==n?void 0:
n.parentElement)d.onkeydown=p=>{"Enter"!==p.key||a.activeEditInfo||a.inputRenderFunction(b);"Escape"===p.key&&a.activeEditInfo&&a.cancel()};(null==h?void 0:h.toString())!==e.innerHTML&&(e.innerHTML=h)}};a.required=!1;a.store=null;a.updateRowItemFunction=({rowData:b,column:d,value:e})=>{b.item[d.path]=e};a.updateStoreItemFunction=({rowData:b,column:d,value:e})=>{var c;return null==(c=a.store)?void 0:c.updateItem({index:b.index,name:d.path,value:e})};return a}t._inheritsLoose(r,u);var q=r.prototype;
q.cancel=function(){var l,{activeEditInfo:a}=this;if(a){var {column:b,root:d,rowData:e,oldValue:c}=a;this._set("activeEditInfo",null);a=this.cellValueFormatFunction({column:b,rowData:e,value:c});d.innerHTML=a;null==(l=this.grid)?void 0:l.notifyResize()}};q.createInputContainer=function(){const l=document.createElement("div");l.classList.add("esri-editor-column__cell-input--container");return l};q.createInputElement=function({value:l}){const a=document.createElement("input");a.classList.add("esri-editor-column__cell-input");
a.maxLength=this.maxLength;a.type=this.inputType;a.value=l;a.onblur=()=>{a.onblur=null;this.submit()};return a};q.submit=async function(){var l,{activeEditInfo:a}=this;if(a){var {column:b,input:d,root:e,rowData:c,oldValue:m}=a;a=this.parseInputValueFunction({input:d,column:b,rowData:c});if(this.cellValueValidatorFunction({value:a,oldValue:m,column:b,rowData:c})){e.innerHTML=this.loadingMessage;null==(l=this.grid)?void 0:l.notifyResize();try{var h;await this.updateStoreItemFunction({rowData:c,column:b,
value:a});this.updateRowItemFunction({rowData:c,column:b,value:a});const n=this.getCellValue(b,c),p=this.cellValueFormatFunction({column:b,rowData:c,value:n});e.innerHTML=p;this.emit("value-change",{column:b,rowData:c,value:n});this._set("activeEditInfo",null);null==(h=this.grid)?void 0:h.notifyResize()}catch(n){this.cancel()}}else this.cancel()}};return r}(w);g.__decorate([k.property({readOnly:!0})],f.prototype,"activeEditInfo",void 0);g.__decorate([k.property()],f.prototype,"cellValueValidatorFunction",
void 0);g.__decorate([k.property()],f.prototype,"editable",void 0);g.__decorate([k.property()],f.prototype,"inputRenderFunction",void 0);g.__decorate([k.property({constructOnly:!0})],f.prototype,"loadingMessage",void 0);g.__decorate([k.property()],f.prototype,"inputType",void 0);g.__decorate([k.property()],f.prototype,"maxLength",void 0);g.__decorate([k.property()],f.prototype,"parseInputValueFunction",void 0);g.__decorate([k.property()],f.prototype,"renderFunction",void 0);g.__decorate([k.property()],
f.prototype,"required",void 0);g.__decorate([k.property()],f.prototype,"store",void 0);g.__decorate([k.property()],f.prototype,"updateRowItemFunction",void 0);g.__decorate([k.property()],f.prototype,"updateStoreItemFunction",void 0);return f=g.__decorate([v.subclass("esri.widgets.FeatureTable.EditorColumn")],f)});