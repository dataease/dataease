// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../support/mathUtils ../../support/geometryUtils ./common".split(" "),function(l,g,f,t,m,h){function n(a,b,e=h.defaultApplyOptions){if(!a.state.isLocal)return 0;var c=a.state.constraints.distance;if(!a.pointsOfInterest.surfaceOrigin.renderLocation||Infinity===c)return 0;k.min=0;k.max=c;c=k;var d=e.interactionType;if(0!==d){var {min:p,max:u}=c,{interactionStartCamera:q,interactionFactor:v}=e;e=1===d||4===d;d=n(a,q);var r=0===d?0:
f.distance(q.eye,a.pointsOfInterest.surfaceOrigin.renderLocation);c.min=p;c.max=u;h.adjustRangeForInteraction(d,r,e,v,.05*r,c)}a=f.distance(b.eye,a.pointsOfInterest.surfaceOrigin.renderLocation);a=k.max-a;return-1E-6<=a?0:a}const k={min:0,max:0},w=g.create(),x=g.create(),y=g.create(),z=g.create();l.applyDistanceConstraint=function(a,b,e=h.defaultApplyOptions){var c=n(a,b,e);if(0===c)return!1;var d=a.pointsOfInterest.surfaceOrigin;c=f.distance(b.eye,a.pointsOfInterest.surfaceOrigin.renderLocation)+
c;const p=f.copy(w,b.eye);e=h.interactionDirectionTowardsConstraintMinimization(b,e.interactionDirection,t.directionFromTo(z,b.eye,a.pointsOfInterest.surfaceOrigin.renderLocation),y);return m.sphere.intersectRay(m.sphere.wrap(c,d.renderLocation),m.ray.wrap(b.eye,e),b.eye)?(d=f.subtract(x,b.eye,p),f.add(b.center,b.center,d),b.markViewDirty(),d=a.renderCoordsHelper.getAltitude(b.center),a.renderCoordsHelper.intersectInfiniteManifold(b.ray,d,b.center),b.markViewDirty(),!0):!1};l.getDistanceConstraintError=
n;Object.defineProperty(l,"__esModule",{value:!0})});