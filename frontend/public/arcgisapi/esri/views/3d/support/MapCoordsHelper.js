// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../core/Error ../../../geometry/SpatialReference ../../../geometry/Point ../../../geometry ../../../core/asyncUtils ../../../core/unitUtils ../../../tasks/support/ProjectParameters ../../../portal/support/geometryServiceUtils".split(" "),function(e,l,m,h,f,n,p,q,r){f=function(){function k(a,b,d=null){this.spatialReference=b;this.unitInMeters=p.getMetersPerUnitForSR(this.spatialReference);this._geometryServicePromise=n.result(this.loadGeometryService(a,d))}var g=k.prototype;g.loadGeometryService=
async function(a,b){if(b)return b;try{return await r.create(a&&a.get("portalItem"))}catch{throw new l("mapcoordshelper:missing-geometry-service","Must specify geometryService in esri/config");}};g.awaitGeometryService=async function(){const a=await this._geometryServicePromise;if(!0===a.ok)return a.value;throw a.error;};g.toGeographic=async function(a){var b=await this.awaitGeometryService();let d=!0;Array.isArray(a[0])&&"number"!==typeof a[0]||(a=[a],d=!1);a=a.map(c=>c instanceof h?c:new h(c,this.spatialReference));
a=new q({geometries:a,outSpatialReference:m.WGS84});b=(await b.project(a)).map(c=>"point"===c.type?[c.x,c.y]:void 0);return d?b:b[0]};return k}();e.MapCoordsHelper=f;e.default=f;Object.defineProperty(e,"__esModule",{value:!0})});