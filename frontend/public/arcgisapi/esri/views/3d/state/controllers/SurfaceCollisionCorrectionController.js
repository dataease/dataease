// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/has ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/property ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ../../../../core/urlUtils ../../../../core/uuid ../../../../portal/support/resourceExtension ../../../../core/mathUtils ../../support/mathUtils ../../../../core/Handles ../../../../geometry/projectionEllipsoid ../../support/stack ../../../../chunks/lineSegment ../../../../chunks/ray ../../../../chunks/boundedPlane ../../../../chunks/clipRay ../../../../chunks/frustum ../../../../chunks/sphere ../../../../chunks/triangle ../../camera/intersectionUtils ../../camera/constraintUtils/surfaceCollision ./CameraController".split(" "),
function(b,g,e,q,r,t,h,u,l,v,w,x,y,z,m,A,B,C,D,E,F,G,H,I,n,p,f){b.SurfaceCollisionCorrectionController=function(k){function d(a){a=k.call(this,a)||this;a.handles=new m;return a}g._inheritsLoose(d,k);var c=d.prototype;c.onControllerStart=function(){this.state=f.State.Running;this.handles.add(this.view.basemapTerrain.on("elevation-change",a=>this.handleElevationChangeEvent(a)));this.applyCorrection()};c.onControllerEnd=function(){this.handles.removeAll()};c.stepController=function(){};c.handleElevationChangeEvent=
function(a){n.eyeWithinExtent(this.view,this.desiredCamera,a.extent,a.spatialReference)&&this.applyCorrection()};c.applyCorrection=function(){this.view.state.updateCamera(a=>{a.copyViewFrom(this.desiredCamera);p.applySurfaceCollisionConstraint(this.view,a,1)||this.constraintEnabled||(this.state=f.State.Stopped)})};g._createClass(d,[{key:"desiredCamera",set:function(a){this._set("desiredCamera",a.clone())}},{key:"canStop",get:function(){return!0}},{key:"constraintEnabled",get:function(){return this.view.state.constraints.collision.enabled}}]);
return d}(f.CameraController);e.__decorate([h.property({constructOnly:!0})],b.SurfaceCollisionCorrectionController.prototype,"view",void 0);e.__decorate([h.property({constructOnly:!0})],b.SurfaceCollisionCorrectionController.prototype,"desiredCamera",null);b.SurfaceCollisionCorrectionController=e.__decorate([l.subclass("esri.views.3d.state.controllers.SurfaceCollisionCorrectionController")],b.SurfaceCollisionCorrectionController);Object.defineProperty(b,"__esModule",{value:!0})});