// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../../core/maybe ../../../../geometry/support/coordsUtils ../../../../chunks/vec3f64 ../../../../geometry/projection ../../../../chunks/mat4f64 ../../../../geometry/support/aaBoundingBox ../../../../layers/graphics/dehydratedFeatures ../../webgl-engine/lib/Object3D ./graphicUtils ./elevationAlignmentUtils".split(" "),function(h,u,q,v,n,w,x,r,y,z,t){const g=v.create();h.createStageObjectForHUD=function(a,b,d,p,k,e,l,f,c,A,B){const C=d?d.length:0;var m=a.clippingExtent;n.projectPointToVector(b,
g,a.elevationProvider.spatialReference);if(u.isSome(m)&&!x.containsPoint(m,g))return null;n.projectPointToVector(b,g,a.renderCoordsHelper.spatialReference);m=a.localOriginFactory.getOrigin(g);f=new y({castShadow:!1,metadata:{layerUid:c,graphicUid:A,usesVerticalDistanceToGround:!0},idHint:f});for(c=0;c<C;c++)f.addGeometry(d[c],p[c],k?k[c]:w.IDENTITY,e,m,B);a=t.applyElevationAlignmentForHUD(f,b,a.elevationProvider,a.renderCoordsHelper,l);return{object:f,sampledElevation:a}};h.extendPointGraphicElevationContext=
function(a,b,d){a=a.elevationContext;d=d.spatialReference;n.projectPointToVector(b,g,d);a.centerPointInElevationSR=r.makeDehydratedPoint(g[0],g[1],b.hasZ?g[2]:0,d)};h.geometryToRenderInfo=function(a,b,d,p,k){const e=new Float64Array(3*a.length),l=new Float64Array(e.length);a.forEach((f,c)=>{e[3*c]=f[0];e[3*c+1]=f[1];e[3*c+2]=2<f.length?f[2]:0});b=t.applyPerVertexElevationAlignment(e,b,0,l,0,e,0,e.length/3,d,p,k);return{numVertices:a.length,position:e,mapPosition:l,projectionSuccess:null!=b,sampledElevation:b}};
h.placePointOnGeometry=function(a){switch(a.type){case "point":return a;case "polygon":case "extent":return z.computeCentroid(a);case "polyline":var b=a.paths[0];if(!b||0===b.length)break;b=q.getPointOnPath(b,q.getPathLength(b)/2);return r.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference);case "mesh":return a.extent.center}return null};Object.defineProperty(h,"__esModule",{value:!0})});