// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/promiseUtils","../../../../core/asyncUtils","./Graphics3DCalloutSymbolLayerFactory","./Graphics3DSymbol"],function(k,g,l,m,n){return function(d){function f(a,b,c){a=d.call(this,a,b,c)||this;a.calloutSymbolLayer=null;a.symbol.hasVisibleCallout()&&(a.calloutSymbolLayer=m.make(a.symbol,b));return a}k._inheritsLoose(f,d);var e=f.prototype;e.doLoad=async function(a){const b=this.calloutSymbolLayer?l.result(this.calloutSymbolLayer.load()):
null;try{await d.prototype.doLoad.call(this,a)}catch(p){var c;null==(c=this.calloutSymbolLayer)?void 0:c.abortLoad();throw p;}if(g.isAborted(a)){var h;null==(h=this.calloutSymbolLayer)?void 0:h.abortLoad();throw g.createAbortError();}b&&await b};e.destroy=function(){d.prototype.destroy.call(this);this.calloutSymbolLayer&&this.calloutSymbolLayer.destroy()};e.createGraphics3DGraphic=function(a,b){b=d.prototype.createGraphics3DGraphic.call(this,a,b);this.calloutSymbolLayer&&(a=this.createCalloutGraphic(a))&&
b.addAuxiliaryGraphic(a);return b};e.globalPropertyChanged=function(a,b){return d.prototype.globalPropertyChanged.call(this,a,b)?this.calloutSymbolLayer?this.calloutSymbolLayer.globalPropertyChanged(a,b,c=>this._getCalloutGraphicLayer(c)):!0:!1};e.updateGeometry=function(a,b){const c=d.prototype.updateGeometry.call(this,a,b);return c&&this.calloutSymbolLayer&&(a=this._getCalloutGraphicLayer(a))?this.calloutSymbolLayer.updateGeometry(a,b):c};e.createCalloutGraphic=function(a){const b=a.renderingInfo;
a.renderingInfo={renderer:b.renderer,symbol:b.symbol,translation:[0,0,0],centerOffset:[0,0,0,0],screenOffset:[0,0],centerOffsetUnits:"world",elevationOffset:0,materialCollection:null};return this.calloutSymbolLayer.createGraphics3DGraphic(a)};e._getCalloutGraphicLayer=function(a){for(const b of a._auxiliaryGraphics)if(b.graphics3DSymbolLayer===this.calloutSymbolLayer)return b};return f}(n)});