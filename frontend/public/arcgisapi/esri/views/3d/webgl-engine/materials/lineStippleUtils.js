// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../../core/maybe ../../../webgl/Program ../../../webgl/BufferObject ../../../webgl/Texture ../../../webgl/VertexArrayObject ../../../webgl/Renderbuffer ../../../webgl/FramebufferObject ../../../webgl/ProgramCache ../../../webgl/RenderingContext ../../../webgl/ShaderCompiler".split(" "),function(k,g,n,r,p,t,u,v,w,x,y){n=function(){function c(){this.cache=new Map}var h=c.prototype;h.dispose=function(){this.cache.forEach(a=>{g.isSome(a.texture)&&(a.texture.dispose(),a.texture=null)});
this.cache.clear()};h.acquire=function(a){if(g.isNone(a))return null;const b=this.patternId(a),e=this.cache.get(b);if(e)return e.refCount++,e.bind;const f=this.patternToTextureData(a,2),m=f.length/2,d={refCount:1,texture:null,bind:(l,q)=>{g.isNone(d.texture)&&(d.texture=new p(l,{width:f.length,height:1,internalFormat:6406,pixelFormat:6406,dataType:5121,wrapMode:33071},f));l.bindTexture(d.texture,q);return m}};this.cache.set(b,d);return d.bind};h.release=function(a){if(!g.isNone(a)){a=this.patternId(a);
var b=this.cache.get(a);b&&(b.refCount--,0===b.refCount&&(g.isSome(b.texture)&&b.texture.dispose(),this.cache.delete(a)))}};h.swap=function(a,b){b=this.acquire(b);this.release(a);return b};h.patternId=function(a){return a.join(",")};h.patternToTextureData=function(a,b){var e=a.reduce((d,l)=>d+l)*b;e=new Uint8Array(e);let f=!0,m=0;for(const d of a){for(a=0;a<d*b;a++)e[m++]=f?255:0;f=!f}return e};return c}();k.StippleTextureRepository=n;k.createStipplePattern=function(c){return g.isNone(c)?c:c.slice()};
k.createStipplePatternSimple=function(c){return[c,c]};Object.defineProperty(k,"__esModule",{value:!0})});