// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../geometry/SpatialReference ../geometry/Extent ../geometry/support/typeUtils ../geometry ./support/fieldUtils ../PopupTemplate ./Layer ../renderers/Renderer ../renderers/ClassBreaksRenderer ../renderers/UniqueValueRenderer ../renderers/DictionaryRenderer ../renderers/DotDensityRenderer ../renderers/HeatmapRenderer ../renderers/SimpleRenderer ../renderers/support/types ../renderers/support/jsonUtils ../core/ReadOnlyMultiOriginJSONSupport ../symbols/support/ElevationInfo ./support/Field ./support/FieldsIndex ./mixins/BlendLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/FeatureReduction ./support/LabelClass ./support/FeatureReductionCluster ./support/FeatureReductionSelection ./support/FeatureType ../support/popupUtils ../tasks/support/Query ./graphics/sources/OGCFeatureSource".split(" "),
function(p,c,b,T,U,d,V,y,W,X,Y,q,z,A,Z,m,B,C,aa,ba,ca,da,ea,fa,ha,D,E,F,G,r,H,I,J,K,L,M,N,O,P,Q,R,t,S){b=function(n){function l(a){a=n.call(this,a)||this;a.collectionId=null;a.copyright=null;a.definitionExpression=null;a.displayField=null;a.elevationInfo=null;a.featureReduction=null;a.fullExtent=null;a.geometryType=null;a.hasZ=void 0;a.labelingInfo=null;a.labelsVisible=!0;a.legendEnabled=!0;a.objectIdField=null;a.popupEnabled=!0;a.popupTemplate=null;a.screenSizePerspectiveEnabled=!0;a.source=null;
a.spatialReference=q.WGS84;a.type="ogc-feature";a.typeIdField=null;a.types=null;a.url=null;return a}p._inheritsLoose(l,n);var k=l.prototype;k.load=function(a){const e=new S["default"]({layer:this});this._set("source",e);this.addResolvingPromise(e.load(a).then(()=>{const {geometryType:f,hasZ:g,objectIdField:h}=this.source.layerDefinition;this.set({geometryType:A.typeKebabDictionary.fromJSON(f),hasZ:g,objectIdField:h});m.fixRendererFields(this.renderer,this.fields);m.fixTimeInfoFields(this.timeInfo,
this.fields)}));return this.when()};k.on=function(a,e){return n.prototype.on.call(this,a,e)};k.createPopupTemplate=function(a){return R.createPopupTemplate(this,a)};k.createQuery=function(){return new t};k.getField=function(a){return this.fieldsIndex.get(a)};k.getFieldDomain=function(a,e){var f;let g,h=!1;e=null==e?void 0:null==(f=e.feature)?void 0:f.attributes;const u=this.typeIdField&&(null==e?void 0:e[this.typeIdField]);null!=u&&this.types&&(h=this.types.some(v=>{if(v.id==u){var w,x;g=null==(w=
v.domains)?void 0:w[a];"inherited"===(null==(x=g)?void 0:x.type)&&(g=this._getLayerDomain(a));return!0}return!1}));h||g||(g=this._getLayerDomain(a));return g};k.queryFeatures=function(a,e){return this.load().then(()=>this.source.queryFeatures(t.from(a)||this.createQuery(),e)).then(f=>{var g;null==f?void 0:null==(g=f.features)?void 0:g.forEach(h=>{h.layer=h.sourceLayer=this});return f})};k._getLayerDomain=function(a){if(!this.fields)return null;for(const e of this.fields)if(e.name===a&&e.domain)return e.domain;
return null};p._createClass(l,[{key:"capabilities",get:function(){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!!this.hasZ},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},
query:{maxRecordCount:1E4,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,
supportsQueryGeometry:!1,supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsStatistics:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1}}}},{key:"defaultPopupTemplate",
get:function(){return this.createPopupTemplate()}},{key:"description",get:function(){var a,e,f;return null!=(a=null==(e=this.source)?void 0:null==(f=e.collection)?void 0:f.description)?a:null}},{key:"fields",get:function(){var a,e,f;const g=null==(a=this.source)?void 0:null==(e=a.layerDefinition)?void 0:e.fields;return null!=(f=null==g?void 0:g.map(h=>r.fromJSON(h)))?f:null},set:function(a){a?this._override("fields",a):this._clearOverride("fields")}},{key:"fieldsIndex",get:function(){return new H(this.fields)}},
{key:"renderer",get:function(){var a,e,f;const g=null==(a=this.source)?void 0:null==(e=a.layerDefinition)?void 0:null==(f=e.drawingInfo)?void 0:f.renderer;return g?E.read(g,null,{origin:"service"}):null},set:function(a){a?(m.fixRendererFields(a,this.fields),this._override("renderer",a)):this._clearOverride("renderer")}},{key:"spatialReferences",get:function(){var a,e;return null==(a=this.source)?void 0:null==(e=a.collection)?void 0:e.crs}},{key:"title",get:function(){var a,e;return null==(a=this.source)?
void 0:null==(e=a.collection)?void 0:e.title},set:function(a){a?this._override("title",a):this._clearOverride("title")}}]);return l}(I.BlendLayer(L.TemporalLayer(K.ScaleRangeLayer(J.RefreshableLayer(F.ReadOnlyMultiOriginJSONMixin(C))))));c.__decorate([d.property({readOnly:!0,dependsOn:["hasZ"],autoTracked:!1})],b.prototype,"capabilities",null);c.__decorate([d.property({type:String})],b.prototype,"collectionId",void 0);c.__decorate([d.property({type:String})],b.prototype,"copyright",void 0);c.__decorate([d.property({readOnly:!0,
dependsOn:["fields","title"]})],b.prototype,"defaultPopupTemplate",null);c.__decorate([d.property({type:String})],b.prototype,"definitionExpression",void 0);c.__decorate([d.property({dependsOn:["source.collection"],readOnly:!0,type:String})],b.prototype,"description",null);c.__decorate([d.property({type:String})],b.prototype,"displayField",void 0);c.__decorate([d.property({type:G})],b.prototype,"elevationInfo",void 0);c.__decorate([d.property({types:{key:"type",base:M["default"],typeMap:{selection:P,
cluster:O}}})],b.prototype,"featureReduction",void 0);c.__decorate([d.property({dependsOn:["source.layerDefinition"],type:[r]})],b.prototype,"fields",null);c.__decorate([d.property({readOnly:!0,dependsOn:["fields"]})],b.prototype,"fieldsIndex",null);c.__decorate([d.property({type:z,aliasOf:"source.fullExtent"})],b.prototype,"fullExtent",void 0);c.__decorate([d.property({type:["point","polygon","polyline","multipoint"]})],b.prototype,"geometryType",void 0);c.__decorate([d.property({type:Boolean})],
b.prototype,"hasZ",void 0);c.__decorate([d.property({type:String})],b.prototype,"id",void 0);c.__decorate([d.property({type:[N]})],b.prototype,"labelingInfo",void 0);c.__decorate([d.property({type:Boolean})],b.prototype,"labelsVisible",void 0);c.__decorate([d.property({type:Boolean})],b.prototype,"legendEnabled",void 0);c.__decorate([d.property({type:["show","hide"]})],b.prototype,"listMode",void 0);c.__decorate([d.property({type:String})],b.prototype,"objectIdField",void 0);c.__decorate([d.property({type:Boolean})],
b.prototype,"popupEnabled",void 0);c.__decorate([d.property({type:B})],b.prototype,"popupTemplate",void 0);c.__decorate([d.property({dependsOn:["source.layerDefinition"],types:D.rendererTypes})],b.prototype,"renderer",null);c.__decorate([d.property({type:Boolean})],b.prototype,"screenSizePerspectiveEnabled",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"source",void 0);c.__decorate([d.property({type:q,readOnly:!0})],b.prototype,"spatialReference",void 0);c.__decorate([d.property({dependsOn:["source.collection"],
readOnly:!0,type:[String]})],b.prototype,"spatialReferences",null);c.__decorate([d.property({dependsOn:["source.collection"]})],b.prototype,"title",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"type",void 0);c.__decorate([d.property({type:String,readOnly:!0})],b.prototype,"typeIdField",void 0);c.__decorate([d.property({type:[Q]})],b.prototype,"types",void 0);c.__decorate([d.property({type:String})],b.prototype,"url",void 0);return b=c.__decorate([y.subclass("esri.layers.OGCFeatureLayer")],
b)});