// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../core/has ../../core/typedArrayUtil ../../core/lang ../../core/maybe ../../geometry/support/jsonUtils ../../Graphic ./dehydratedFeatures".split(" "),function(f,G,g,l,u,v,w,x){function m(a){return"declaredClass"in a}function h(a){return"declaredClass"in a}function n(a){return"declaredClass"in a}function p(a){return u.isNone(a)?null:m(a)?a:v.fromJSON(y(a))}function y(a){const b=a.spatialReference.toJSON();switch(a.type){case "point":{const {x:c,y:d,z:e,m:k}=a;return{x:c,y:d,z:e,
m:k,spatialReference:b}}case "polygon":{const {rings:c,hasZ:d,hasM:e}=a;return{rings:q(c),hasZ:d,hasM:e,spatialReference:b}}case "polyline":{const {paths:c,hasZ:d,hasM:e}=a;return{paths:q(c),hasZ:d,hasM:e,spatialReference:b}}case "extent":{const {xmin:c,xmax:d,ymin:e,ymax:k,zmin:z,zmax:A,mmin:B,mmax:C,hasZ:D,hasM:E}=a;return{xmin:c,xmax:d,ymin:e,ymax:k,zmin:z,zmax:A,mmin:B,mmax:C,hasZ:D,hasM:E,spatialReference:b}}case "multipoint":{const {points:c,hasZ:d,hasM:e}=a;return{points:r(c)?t(c):c,hasZ:d,
hasM:e,spatialReference:b}}}}function q(a){return F(a)?a.map(b=>t(b)):a}function t(a){return a.map(b=>g.toArray(b))}function F(a){for(const b of a)if(0!==b.length)return r(b);return!1}function r(a){return a.length&&(g.isFloat32Array(a[0])||g.isFloat64Array(a[0]))}f.clonePoint=function(a,b){if(!a)return null;if(h(a)){if(null==b)return a.clone();if(h(b))return b.copy(a)}null!=b?(b.x=a.x,b.y=a.y,b.spatialReference=a.spatialReference,a.hasZ?(b.z=a.z,b.hasZ=a.hasZ):(b.z=null,b.hasZ=!1),a.hasM?(b.m=a.m,
b.hasM=!0):(b.m=null,b.hasM=!1)):(b=x.makeDehydratedPoint(a.x,a.y,a.z,a.spatialReference),a.hasM&&(b.m=a.m,b.hasM=!0));return b};f.hydrateGeometry=p;f.hydrateGraphic=function(a,b){if(!a)return null;if(n(a))return a;b=new w({layer:b,sourceLayer:b});b.visible=a.visible;b.symbol=l.clone(a.symbol);b.attributes=l.clone(a.attributes);b.geometry=p(a.geometry);return b};f.isHydratedGeometry=m;f.isHydratedGraphic=n;f.isHydratedPoint=h;Object.defineProperty(f,"__esModule",{value:!0})});