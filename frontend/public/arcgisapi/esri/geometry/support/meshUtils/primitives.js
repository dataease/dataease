// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/vec3f64","../../../chunks/vec3","../../../chunks/mat3f64","./georeference"],function(x,C,z,D,E){var A=[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],B=[0,0,1,0,0,1,0,0,1,0,0,1],F=[0,1,1,1,1,0,0,0],G=[0,1,2,0,2,3],H={east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]};const I={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,
1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},h=C.create(),w=D.create();x.boxFaceOrder={south:0,east:1,north:2,west:3,up:4,down:5};x.convertUnitGeometry=function(b,e,g){for(var a=0;a<b.position.length;a+=
3)b.position[a+2]+=.5;a=g&&g.size;if(null!=a){a="number"===typeof a?[a,a,a]:[null!=a.width?a.width:1,null!=a.depth?a.depth:1,null!=a.height?a.height:1];w[0]=a[0];w[4]=a[1];w[8]=a[2];for(var c=0;c<b.position.length;c+=3){for(var f=0;3>f;f++)h[f]=b.position[c+f];z.transformMat3(h,h,w);for(f=0;3>f;f++)b.position[c+f]=h[f]}if(a[0]!==a[1]||a[1]!==a[2])for(w[0]=1/a[0],w[4]=1/a[1],w[8]=1/a[2],a=0;a<b.normal.length;a+=3){for(c=0;3>c;c++)h[c]=b.normal[a+c];z.transformMat3(h,h,w);z.normalize(h,h);for(c=0;3>
c;c++)b.normal[a+c]=h[c]}}a=E.georeference(b,e,g);return{vertexAttributes:{position:a.position,normal:a.normal,uv:b.uv},components:[{faces:b.faces,material:g&&g.material||null}],spatialReference:e.spatialReference}};x.createUnitSizeBox=function(){const {faceDescriptions:b,faceVertexOffsets:e,uvScales:g}=I;var a=4*b.length;const c=new Float64Array(3*a),f=new Float32Array(3*a);a=new Float32Array(2*a);const q=new Uint32Array(6*b.length);let p=0,k=0,l=0,n=0;for(let m=0;m<b.length;m++){const t=b[m];var d=
p/3;for(const r of e)q[n++]=d+r;d=t.corners;for(let r=0;4>r;r++){const u=d[r];let y=0;a[l++]=.25*g[r][0]+t.uvOrigin[0];a[l++]=t.uvOrigin[1]-.25*g[r][1];for(let v=0;3>v;v++)0!==t.axis[v]?(c[p++]=.5*t.axis[v],f[k++]=t.axis[v]):(c[p++]=.5*u[y++],f[k++]=0)}}return{position:c,normal:f,uv:a,faces:q}};x.createUnitSizeCylinder=function(b=0){b=Math.round(16*Math.pow(2,b));var e=4*(b+1)+2*b;const g=new Float64Array(3*e),a=new Float32Array(3*e);e=new Float32Array(2*e);const c=new Uint32Array(12*b);let f=0,q=
0,p=0,k=0,l=0;for(let d=0;5>=d;d++){const m=0===d||5===d,t=1>=d||4<=d,r=2===d||4===d,u=m?b-1:b;for(let y=0;y<=u;y++){var n=y/u*2*Math.PI;const v=m?0:.5;h[0]=v*Math.sin(n);h[1]=v*-Math.cos(n);h[2]=2>=d?.5:-.5;for(n=0;3>n;n++)g[f++]=h[n],t?a[q++]=2===n?1>=d?1:-1:0:a[q++]=2===n?0:h[n]/v;e[p++]=(y+(m?.5:0))/b;1>=d?e[p++]=1*d/3:3>=d?e[p++]=(d-2)/3+1/3:e[p++]=(d-4)/3+2/3;r||0===d||y===b||(5!==d&&(c[k++]=l,c[k++]=l+1,c[k++]=l-b),1!==d&&(c[k++]=l,c[k++]=l-b,c[k++]=l-b-1));l++}}return{position:g,normal:a,
uv:e,faces:c}};x.createUnitSizePlane=function(b){b=H[b];const e=new Float64Array(A.length),g=new Float32Array(B.length);let a=0;for(let f=0;4>f;f++){const q=a;for(let p=0;3>p;p++){var c=b[p];const k=Math.abs(c)-1;c=0<=c?1:-1;e[a]=A[q+k]*c;g[a]=B[q+k]*c;a++}}return{position:e,normal:g,uv:new Float32Array(F),faces:new Uint32Array(G)}};x.createUnitSizeSphere=function(b=0){b=Math.round(8*Math.pow(2,b));const e=2*b;var g=(b-1)*(e+1)+2*e;const a=new Float64Array(3*g),c=new Float32Array(3*g);g=new Float32Array(2*
g);const f=new Uint32Array((b-1)*e*6);let q=0,p=0,k=0,l=0;for(let m=0;m<=b;m++){var n=m/b*Math.PI+.5*Math.PI;const t=Math.cos(n);h[2]=Math.sin(n);const r=(n=0===m||m===b)?e-1:e;for(let u=0;u<=r;u++){var d=u/r*2*Math.PI;h[0]=-Math.sin(d)*t;h[1]=Math.cos(d)*t;for(d=0;3>d;d++)a[q]=.5*h[d],c[q]=h[d],++q;g[p++]=(u+(n?.5:0))/e;g[p++]=m/b;0!==m&&u!==e&&(m!==b&&(f[k++]=l,f[k++]=l+1,f[k++]=l-e),1!==m&&(f[k++]=l,f[k++]=l-e,f[k++]=l-e-1));l++}}return{position:a,normal:c,uv:g,faces:f}};Object.defineProperty(x,
"__esModule",{value:!0})});