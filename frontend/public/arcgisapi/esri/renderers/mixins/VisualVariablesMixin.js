// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../layers/support/fieldUtils ../visualVariables/VisualVariable ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariableFactory".split(" "),
function(l,m,g,B,C,D,p,E,q,r,t,F,G,H,k,u,v,w,x,y,z){const A={base:u,key:"type",typeMap:{opacity:w,color:v,rotation:x,size:y}};l.VisualVariablesMixin=e=>{e=function(n){function h(){var a=n.apply(this,arguments)||this;a._vvFactory=new z;return a}m._inheritsLoose(h,n);var f=h.prototype;f.readVisualVariables=function(a,b,c){return this._vvFactory.readVariables(a,b,c)};f.writeVisualVariables=function(a,b,c,d){b[c]=this._vvFactory.writeVariables(a,d)};f.hasVisualVariables=function(a,b){return a?!!this.getVisualVariablesForType(a,
b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))};f.getVisualVariablesForType=function(a,b){var c=this.visualVariables;if(c&&(c=c.filter(d=>d.type===a&&("string"===typeof b?d.target===b:!1===b?!d.target:!0)),!c||0!==c.length))return c};f.collectVVRequiredFields=async function(a,b){let c=[];this.visualVariables&&(c=c.concat(this.visualVariables));for(const d of c)d&&
(d.field&&k.collectField(a,b,d.field),d.normalizationField&&k.collectField(a,b,d.normalizationField),d.valueExpression&&await k.collectArcadeFieldNames(a,b,d.valueExpression))};m._createClass(h,[{key:"visualVariables",set:function(a){this._vvFactory.visualVariables=a;this._set("visualVariables",this._vvFactory.visualVariables)}},{key:"arcadeRequiredForVisualVariables",get:function(){if(!this.visualVariables)return!1;for(const a of this.visualVariables)if(a.arcadeRequired)return!0;return!1}}]);return h}(e);
g.__decorate([p.property({types:[A],value:null,json:{write:!0}})],e.prototype,"visualVariables",null);g.__decorate([q.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null);g.__decorate([t.writer("visualVariables")],e.prototype,"writeVisualVariables",null);return e=g.__decorate([r.subclass("esri.renderers.mixins.VisualVariablesMixin")],e)};Object.defineProperty(l,"__esModule",{value:!0})});