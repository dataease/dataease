//>>built
define(["./GridFromHtml","./ColumnSet","dojo/_base/declare"],function(n,u,v){function w(e){function q(x){f+=x;b=r[c];f>=b&&(l[c][a]=g,f-=b,c++,g=[])}var l=[],r=[],h=[],k=e.getElementsByTagName("colgroup"),m=k.length,t=e.getElementsByTagName("tr"),y=t.length,z=n.utils.getNumFromAttr,A=n.utils.getColumnFromCell,c,a,d;if(2>m)return!1;for(a=0;a<m;a++){var b=z(k[a],"span")||1;r[a]=b;l[a]=[];h[a]=[];for(d=0;d<b;d++)h[a][d]=0}for(a=0;a<y;a++){var f=c=0;var g=[];var p=t[a];k=p.getElementsByTagName("th");
m=k.length;for(d=0;d<m;d++){for(;h[c][f];)h[c][f]--,q(1);b=A(k[d]);g.push(b);h[c][f]=b.rowSpan?b.rowSpan-1:0;q(b.colSpan||1)}g.length&&(l[c][a]=g)}p&&e.removeChild(p.parentNode);return l}return v([n,u],{configStructure:function(){var e;!this._checkedTrs&&(e=w(this.srcNodeRef))&&(this.columnSets=e,this._checkedTrs=!0);return this.inherited(arguments)}})});