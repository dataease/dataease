//>>built
define("xstyle/main",["require","xstyle/core/parser","xstyle/core/base","xstyle/core/elemental","xstyle/core/generate"],function(q,g,f,l,r){function m(b){b=document.getElementsByTagName(b);for(var a=0;a<b.length;a++)h(b[a])}function d(){m("link");m("style")}function h(b,a,e){function n(){q(["xstyle/core/load-imports"],function(c){c(b,function(){h(b,a,!0)})})}function t(c){for(var b=c.cssRules,e=0;e<b.length;e++){var d=b[e];if(d.selectorText&&"x-"==d.selectorText.substring(0,2)&&(p=!0,/^'/.test(d.style.content)))return k(eval(d.style.content),
c,a),!0}}var c=b.sheet||b.styleSheet;if(c&&(!c.processed||e)){c.processed=!0;var p=c.needsParsing,f=c.rules||c.cssRules;if((c.href||c.imports&&c.imports.length)&&!e)return n();if(!p)for(var d=0;d<f.length;d++){var g=f[d];if(g.href&&!e){if(!t(g.styleSheet))return n();return}}k(c.localSource||(c.ownerNode||c.owningElement).innerHTML,c,a)}}function k(b,a,e){a.addRule||(a.addRule=function(b,c,a){return this.insertRule(b+"{"+c+"}",0<=a?a:this.cssRules.length)});a.deleteRule||(a.deleteRule=a.removeRule);
var d=1;(a.href||location.href).replace(/[^\/]+$/,"");f.css=b;g(f,b,a);0==--d&&e&&e(a);return f}l.ready(d);g.getStyleSheet=function(b,a){return b.styleSheet||b};return{process:h,processAll:d,parse:k,generate:r,update:l.update,load:function(b,a,e,f){a(["xstyle/css"],function(g){g.load(b,a,function(a){a?h({sheet:a},e):(d(),e())},f)})}}});