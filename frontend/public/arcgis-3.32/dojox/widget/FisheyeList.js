//>>built
define("dojox/widget/FisheyeList","dojo/_base/declare dojo/_base/sniff dojo/_base/lang dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom-construct dojo/on dojo/_base/window dojo/mouse dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Container ./FisheyeListItem".split(" "),function(p,v,e,l,m,w,x,h,f,y,k,g,q,r,t,u,z){return p("dojox.widget.FisheyeList",[r,t,u],{constructor:function(){this.pos={x:-1,y:-1};this.timerScale=1},EDGE:{CENTER:0,LEFT:1,RIGHT:2,TOP:3,
BOTTOM:4},templateString:'\x3cdiv class\x3d"dojoxFisheyeListBar" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',snarfChildDomOutput:!0,itemWidth:40,itemHeight:40,itemMaxWidth:150,itemMaxHeight:150,imgNode:null,orientation:"horizontal",isFixed:!1,conservativeTrigger:!1,effectUnits:2,itemPadding:10,attachEdge:"center",labelEdge:"bottom",postCreate:function(){var a=this.EDGE,b=this.isHorizontal="horizontal"==this.orientation;m.setSelectable(this.domNode,!1);this.selectedNode=-1;this.isOver=
!1;this.hitY2=this.hitX2=this.hitY1=this.hitX1=-1;this.anchorEdge=this._toEdge(this.attachEdge,a.CENTER);this.labelEdge=this._toEdge(this.labelEdge,a.TOP);this.labelEdge==a.CENTER&&(this.labelEdge=a.TOP);b?(this.anchorEdge==a.LEFT&&(this.anchorEdge=a.CENTER),this.anchorEdge==a.RIGHT&&(this.anchorEdge=a.CENTER),this.labelEdge==a.LEFT&&(this.labelEdge=a.TOP),this.labelEdge==a.RIGHT&&(this.labelEdge=a.TOP)):(this.anchorEdge==a.TOP&&(this.anchorEdge=a.CENTER),this.anchorEdge==a.BOTTOM&&(this.anchorEdge=
a.CENTER),this.labelEdge==a.TOP&&(this.labelEdge=a.LEFT),this.labelEdge==a.BOTTOM&&(this.labelEdge=a.LEFT));b=this.effectUnits;this.proximityLeft=this.itemWidth*(b-.5);this.proximityRight=this.itemWidth*(b-.5);this.proximityTop=this.itemHeight*(b-.5);this.proximityBottom=this.itemHeight*(b-.5);this.anchorEdge==a.LEFT&&(this.proximityLeft=0);this.anchorEdge==a.RIGHT&&(this.proximityRight=0);this.anchorEdge==a.TOP&&(this.proximityTop=0);this.anchorEdge==a.BOTTOM&&(this.proximityBottom=0);this.anchorEdge==
a.CENTER&&(this.proximityLeft/=2,this.proximityRight/=2,this.proximityTop/=2,this.proximityBottom/=2)},startup:function(){this.children=this.getChildren();this._initializePositioning();this._onMouseMoveHandle=k.pausable(g.doc.documentElement,"mousemove",e.hitch(this,"_onMouseMove"));this.conservativeTrigger&&this._onMouseMoveHandle.pause();this.isFixed&&this.own(k(g.doc,"scroll",e.hitch(this,this._onScroll)));this.own(k(g.doc.documentElement,q.leave,e.hitch(this,"_onBodyOut")),l.after(this,"addChild",
e.hitch(this,"_initializePositioning"),!0),l.after(g.global,"onresize",e.hitch(this,"_initializePositioning"),!0))},_initializePositioning:function(){this.itemCount=this.children.length;this.barWidth=(this.isHorizontal?this.itemCount:1)*this.itemWidth;this.barHeight=(this.isHorizontal?1:this.itemCount)*this.itemHeight;this.totalWidth=this.proximityLeft+this.proximityRight+this.barWidth;this.totalHeight=this.proximityTop+this.proximityBottom+this.barHeight;for(var a=0;a<this.children.length;a++){this.children[a].posX=
this.itemWidth*(this.isHorizontal?a:0);this.children[a].posY=this.itemHeight*(this.isHorizontal?0:a);this.children[a].cenX=this.children[a].posX+this.itemWidth/2;this.children[a].cenY=this.children[a].posY+this.itemHeight/2;var b=this.isHorizontal?this.itemWidth:this.itemHeight,d=this.effectUnits*b,c=this.isHorizontal?this.children[a].cenX:this.children[a].cenY,n=this.isHorizontal?this.proximityLeft:this.proximityTop,e=this.isHorizontal?this.proximityRight:this.proximityBottom,g=this.isHorizontal?
this.barWidth:this.barHeight,h=d;h>c+n&&(h=c+n);d>g-c+e&&(d=g-c+e);this.children[a].effectRangeLeft=h/b;this.children[a].effectRangeRght=d/b}f.set(this.domNode,{width:this.barWidth+"px",height:this.barHeight+"px"});for(a=0;a<this.children.length;a++)b=this.children[a],f.set(b.domNode,{left:b.posX+"px",top:b.posY+"px",width:this.itemWidth+"px",height:this.itemHeight+"px"}),f.set(b.imgNode,{left:this.itemPadding+"%",top:this.itemPadding+"%",width:100-2*this.itemPadding+"%",height:100-2*this.itemPadding+
"%"});this._calcHitGrid()},_overElement:function(a,b){a=m.byId(a);var d=b.pageX;b=b.pageY;var c=h.position(a,!0);a=c.y;var f=a+c.h,e=c.x,c=e+c.w;return d>=e&&d<=c&&b>=a&&b<=f},_onBodyOut:function(a){this._overElement(g.body(),a)||this._setDormant(a)},_setDormant:function(a){this.isOver&&(this.isOver=!1,this.conservativeTrigger&&this._onMouseMoveHandle.pause(),this._onGridMouseMove(-1,-1))},_setActive:function(a){this.isOver||(this.isOver=!0,this.conservativeTrigger&&(this._onMouseMoveHandle.resume(),
this.timerScale=0,this._onMouseMove(a),this._expandSlowly()))},_onMouseMove:function(a){a.pageX>=this.hitX1&&a.pageX<=this.hitX2&&a.pageY>=this.hitY1&&a.pageY<=this.hitY2?(this.isOver||this._setActive(a),this._onGridMouseMove(a.pageX-this.hitX1,a.pageY-this.hitY1)):this.isOver&&this._setDormant(a)},_onScroll:function(){this._calcHitGrid()},onResized:function(){this._calcHitGrid()},_onGridMouseMove:function(a,b){this.pos={x:a,y:b};this._paint()},_paint:function(){var a=this.pos.x,b=this.pos.y;if(!(0>=
this.itemCount)){var d=((this.isHorizontal?a:b)-(this.isHorizontal?this.proximityLeft:this.proximityTop))/(this.isHorizontal?this.itemWidth:this.itemHeight)-.5,c=0;this.anchorEdge==this.EDGE.BOTTOM&&(c=(b-this.proximityTop)/this.itemHeight,c=.5<c?1:b/(this.proximityTop+this.itemHeight/2));this.anchorEdge==this.EDGE.TOP&&(c=(b-this.proximityTop)/this.itemHeight,c=.5>c?1:(this.totalHeight-b)/(this.proximityBottom+this.itemHeight/2));this.anchorEdge==this.EDGE.RIGHT&&(c=(a-this.proximityLeft)/this.itemWidth,
c=.5<c?1:a/(this.proximityLeft+this.itemWidth/2));this.anchorEdge==this.EDGE.LEFT&&(c=(a-this.proximityLeft)/this.itemWidth,c=.5>c?1:(this.totalWidth-a)/(this.proximityRight+this.itemWidth/2));this.anchorEdge==this.EDGE.CENTER&&(c=this.isHorizontal?b/this.totalHeight:a/this.totalWidth,.5<c&&(c=1-c),c*=2);for(a=0;a<this.itemCount;a++)b=this._weighAt(d,a),0>b&&(b=0),this._setItemSize(a,b*c);c=Math.round(d);a=0;0>d?c=0:d>this.itemCount-1?c=this.itemCount-1:a=(d-c)*((this.isHorizontal?this.itemWidth:
this.itemHeight)-this.children[c].sizeMain);this._positionElementsFrom(c,a)}},_weighAt:function(a,b){var d=Math.abs(a-b);a=0<a-b?this.children[b].effectRangeRght:this.children[b].effectRangeLeft;return d>a?0:1-d/a},_setItemSize:function(a,b){if(this.children[a].scale!=b){this.children[a].scale=b;b*=this.timerScale;var d=Math.round(this.itemWidth+(this.itemMaxWidth-this.itemWidth)*b);b=Math.round(this.itemHeight+(this.itemMaxHeight-this.itemHeight)*b);if(this.isHorizontal){this.children[a].sizeW=d;
this.children[a].sizeH=b;this.children[a].sizeMain=d;this.children[a].sizeOff=b;var c=0,c=this.anchorEdge==this.EDGE.TOP?this.children[a].cenY-this.itemHeight/2:this.anchorEdge==this.EDGE.BOTTOM?this.children[a].cenY-(b-this.itemHeight/2):this.children[a].cenY-b/2;this.children[a].usualX=Math.round(this.children[a].cenX-d/2);f.set(this.children[a].domNode,{top:c+"px",left:this.children[a].usualX+"px"})}else this.children[a].sizeW=d,this.children[a].sizeH=b,this.children[a].sizeOff=d,this.children[a].sizeMain=
b,c=0,c=this.anchorEdge==this.EDGE.LEFT?this.children[a].cenX-this.itemWidth/2:this.anchorEdge==this.EDGE.RIGHT?this.children[a].cenX-(d-this.itemWidth/2):this.children[a].cenX-d/2,this.children[a].usualY=Math.round(this.children[a].cenY-b/2),f.set(this.children[a].domNode,{left:c+"px",top:this.children[a].usualY+"px"});f.set(this.children[a].domNode,{width:d+"px",height:b+"px"});this.children[a].svgNode&&this.children[a].svgNode.setSize(d,b)}},_positionElementsFrom:function(a,b){var d=0,c;this.isHorizontal?
(d="usualX",c="left"):(d="usualY",c="top");d=Math.round(this.children[a][d]+b);f.get(this.children[a].domNode,c)!=d+"px"&&(f.set(this.children[a].domNode,c,d+"px"),this._positionLabel(this.children[a]));var e=d;for(b=a-1;0<=b;b--)e-=this.children[b].sizeMain,f.get(this.children[a].domNode,c)!=e+"px"&&(f.set(this.children[b].domNode,c,e+"px"),this._positionLabel(this.children[b]));for(b=a+1;b<this.itemCount;b++)d+=this.children[b-1].sizeMain,f.get(this.children[a].domNode,c)!=d+"px"&&(f.set(this.children[b].domNode,
c,d+"px"),this._positionLabel(this.children[b]))},_positionLabel:function(a){var b=0,d=0,c=h.getMarginBox(a.lblNode);this.labelEdge==this.EDGE.TOP&&(b=Math.round(a.sizeW/2-c.w/2),d=-c.h);this.labelEdge==this.EDGE.BOTTOM&&(b=Math.round(a.sizeW/2-c.w/2),d=a.sizeH);this.labelEdge==this.EDGE.LEFT&&(b=-c.w,d=Math.round(a.sizeH/2-c.h/2));this.labelEdge==this.EDGE.RIGHT&&(b=a.sizeW,d=Math.round(a.sizeH/2-c.h/2));f.set(a.lblNode,{left:b+"px",top:d+"px"})},_calcHitGrid:function(){var a=h.position(this.domNode,
!0);this.hitX1=a.x-this.proximityLeft;this.hitY1=a.y-this.proximityTop;this.hitX2=this.hitX1+this.totalWidth;this.hitY2=this.hitY1+this.totalHeight},_toEdge:function(a,b){return this.EDGE[a.toUpperCase()]||b},_expandSlowly:function(){this.isOver&&(this.timerScale+=.2,this._paint(),1>this.timerScale&&setTimeout(e.hitch(this,"_expandSlowly"),10))}})});