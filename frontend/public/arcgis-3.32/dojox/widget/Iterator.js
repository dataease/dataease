//>>built
define("dojox/widget/Iterator",["dojo","dijit","dojox","dojo/require!dijit/Declaration"],function(b,e,f){b.provide("dojox.widget.Iterator");b.require("dijit.Declaration");b.experimental("dojox.widget.Iterator");b.declare("dojox.widget.Iterator",[e.Declaration],{constructor:function(){var a=0;return function(){this.attrs=[];this.children=[];this.widgetClass="dojox.widget.Iterator._classes._"+a++}}(),start:0,fetchMax:1E3,query:{name:"*"},attrs:[],defaultValue:"",widgetCtor:null,dataValues:[],data:null,
store:null,_srcIndex:0,_srcParent:null,_setSrcIndex:function(a){this._srcIndex=0;for(this._srcParent=a.parentNode;a.previousSibling;)this._srcIndex++,a=a.previousSibling},postscript:function(a,c){this._setSrcIndex(c);this.inherited("postscript",arguments);var d=this.widgetCtor=b.getObject(this.widgetClass);this.attrs=b.map(d.prototype.templateString.match(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g),function(a){return a.slice(2,-1)});b.forEach(this.attrs,function(a){d.prototype[a]=""});this.update()},
clear:function(){this.children.length&&this._setSrcIndex(this.children[0].domNode);b.forEach(this.children,"item.destroy();");this.children=[]},update:function(){if(this.store)this.fetch();else this.onDataAvailable(this.data||this.dataValues)},_addItem:function(a,c){b.isString(a)&&(a={value:a});a=new this.widgetCtor(a);this.children.push(a);b.place(a.domNode,this._srcParent,this._srcIndex+c)},getAttrValuesObj:function(a){var c={};b.isString(a)?b.forEach(this.attrs,function(b){c[b]="value"==b?a:this.defaultValue},
this):b.forEach(this.attrs,function(b){c[b]=this.store?this.store.getValue(a,b)||this.defaultValue:a[b]||this.defaultValue},this);return c},onDataAvailable:function(a){this.clear();b.forEach(a,function(a,b){this._addItem(this.getAttrValuesObj(a),b)},this)},fetch:function(a,c,d){this.store.fetch({query:a||this.query,start:c||this.start,count:d||this.fetchMax,onComplete:b.hitch(this,"onDataAvailable")})}});f.widget.Iterator._classes={}});