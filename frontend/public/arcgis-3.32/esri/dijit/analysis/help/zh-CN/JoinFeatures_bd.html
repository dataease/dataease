<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title></title>
    <link rel="Stylesheet" href="../css/analysis.css" />
    <script type="text/javascript">
        function init() {
            if (window.location.hash) {
                var parentDiv, nodes, i, helpInfo, helpId, helpInfoArr, helpEnvFilter, envContent, hideEnvClass, hideNodes;
                helpInfo = window.location.hash.substring(1);
                    if(helpInfo.indexOf("-")) {
                        helpInfoArr = helpInfo.split("-");
                        helpId = helpInfoArr[0];
                        helpEnvFilter = helpInfoArr[1];
                    }
                    else {
                        helpId = helpInfo;
                    }
                parentDiv = document.getElementById("topics");
                nodes = parentDiv.children;
                    hideEnvClass = (helpEnvFilter === "OnlineOnly"? "PortalOnly": "OnlineOnly");
                    if(document.getElementsByClassName) {
                        hideNodes = document.getElementsByClassName(hideEnvClass);
                    }
                    else {
                        hideNodes = document.querySelectorAll(hideEnvClass);
                    }
                for(i=0; i < nodes.length; i++) {
                    if(nodes[i].id !== helpId) {
                        nodes[i].style.display ="none";
                    }
                    }
                    for(i=0; i < hideNodes.length; i++) {
                        hideNodes[i].style.display ="none";
                    }
                }
            }
    </script>
</head>
<body onload="init()">
<div id="topics">
    <div id="toolDescription" class="smallsize">
        <h2>连接要素</h2><p/>
        <h2><img src="../images/GUID-900E33CD-3789-45B5-8F0C-92D91E64D2A4-web.png" alt="连接要素"></h2>
        <hr/>
    <p>&ldquo;连接要素&rdquo;工具适用于两个图层。&ldquo;连接要素&rdquo;可根据空间、时态和属性关系或者三者的某些组合将一个要素的属性连接到另一个要素。该工具可确定满足指定连接条件的所有输入要素并将第二个输入图层连接到第一个。可选择将所有要素连接到匹配的要素或汇总匹配的要素。
    </p>
    <p>&ldquo;连接要素&rdquo;可应用于点、线、面和表。时态连接需要启用时间的输入数据，而空间连接需要具有几何的数据。
    </p>
    </div>
    <!--Parameter divs for each param-->
    <div id="targetLayer">
        <div><h2>选择目标图层</h2></div>
        <hr/>
        <div>
            <p>该图层将具有来自追加至其表格的连接图层中的属性。
            </p>
            <p>使用 <b>邻近</b>空间关系进行分析需要投影坐标系。您可以在 <b>分析环境</b>中设置 <b>处理坐标系</b>。如果您的处理坐标系未设置为投影坐标系，则 <b>运行分析</b>时系统将提示您进行设置 。
            </p>
            <p>除了从地图中选择图层外，还可以在下拉列表的底部选择 <b>选择分析图层</b>，以浏览至大数据文件共享数据集或要素图层中的内容。
            </p>
        </div>
    </div>
    <div id="joinLayer">
        <div><h2>选择要连接至目标图层的图层</h2></div>
        <hr/>
        <div>
            <p>要将其属性追加到目标图层的连接图层。
            </p>
            <p>除了从地图中选择图层外，还可以在下拉列表的底部选择 <b>选择分析图层</b>，以浏览至大数据文件共享数据集或要素图层中的内容。
            </p>
        </div>
    </div>
    <div id="joinOperation">
        <div><h2>选择连接操作</h2></div>
        <hr/>
        <div>
            <p>当发现多个连接要素与要连接的图层具有相同关系时，该操作将确定如何在输出中处理目标图层和连接图层之间的连接。有两种连接操作可供选择：
                <ul>
                    <li> <b>一对一连接</b> - 此选项可汇总每个要连接的要素的所有匹配要素。
                    </li>
                    <li> <b>一对多连接</b> - 此选项可将所有匹配要素连接到连接图层。
                    </li>
                </ul>
                
            </p>
            <p>例如，假设您希望查找农贸市场 2 千米范围内的超市。在此案例中，目标图层具有表示农贸市场的单个要素，而连接图层表示本地杂货店并且具有年销售总额等属性。可使用&ldquo;连接要素&rdquo;工具找到五个满足条件的杂货店。如果您将连接操作指定为 <b>一对多连接</b>，则会在结果中得到五个要素，每行表示农贸市场和超市。如果指定 <b>一对一连接</b>关系，则会得到一个表示农贸市场以及超市汇总信息（例如，计数 (2) 以及年销售总额等其他统计数据）的要素。
            </p>
        </div>
    </div>
    <div id="joinOptions">
        <div><h2>选择一个或多个连接</h2></div>
        <hr/>
        <div>
            <p>指定使用的连接选项。可应用以下连接类型中的一个、两个或三个： 
                <ul>
                    <li> <b>空间</b> - 使用指定的空间关系连接要素。两个图层都具有几何时才能使用此类型。
                    </li>
                    <li> <b>时态</b> - 使用时态关系连接要素。需要在这两个图层上启用时间才能使用此类型。
                    </li>
                    <li> <b>属性</b> - 基于相等字段连接要素。
                    </li>
                </ul>
                
            </p>
            <p>
            </p>
        </div>
    </div>
    <div id="spatialRelationship">
        <div><h2>选择空间关系</h2></div>
        <hr/>
        <div>
            <p>将确定要素是否彼此相连的空间关系。以下可用关系取决于要用作输入要素的几何类型（点、折线或面）。
                <ul>
                    <li> <b>相交</b> - 对彼此相交的要素进行匹配。
                    </li>
                    <li> <b>相等</b> - 对具有相同几何的要素进行匹配。
                    </li>
                    <li> <b>邻近</b> - 对在彼此指定距离内的要素进行匹配。如果使用空间 <b>邻近</b>关系，则目标图层必须位于投影坐标系中，否则必须使用 <b>分析环境</b>将处理空间参考设置为投影坐标系。
                    </li>
                    <li> <b>包含</b> - 如果目标图层包含在连接要素内，则会对这些要素进行匹配。
                    </li>
                    <li> <b>范围内</b> - 如果目标图层位于连接要素内，则会对这些要素进行匹配。
                    </li>
                    <li> <b>接触</b> - 如果要素的边界与目标要素相接触，则会对这些要素进行匹配。
                    </li>
                    <li> <b>交叉</b> - 对具有交叉轮廓的要素进行匹配。
                    </li>
                    <li> <b>重叠</b> - 如果要素重叠，则对其进行连接。
                    </li>
                </ul>
                
            </p>
        </div>
    </div>
    <div id="nearSpatial">
        <div><h2></h2></div>
        <hr/>
        <div>
            <p> 指定适用于空间邻近关系的半径。
            </p>
            <p>例如，如果您有一个表示核电站的数据集和一个表示住宅的数据集，则可以设置 1 千米的邻近空间距离，以查找在核电站 1 千米范围内的房屋。
            </p> 
        </div>
    </div>
    <div id="temporalRelationship">
        <div><h2>选择时态关系</h2></div>
        <hr/>
        <div>
            <p>将确定要素是否彼此相连的时态关系。仅当在两个图层上启用时间时，此选项才可用，可用关系取决于要用于输入要素的时间类型（时刻或间隔）。可用的时间关系如下：
                <ul>
                    <li> <b>满足</b> - 如果第一个要素满足第二个要素，则对要素进行匹配。
                    </li>
                    <li> <b>被满足</b> - 如果第二个要素满足第一个要素，则对要素进行匹配。
                    </li>
                    <li> <b>重叠</b> - 如果第一个要素叠置在第二个要素之上，则对要素进行匹配。
                    </li>
                    <li> <b>被重叠</b> - 如果第二个要素叠置在第一个要素之上，则对要素进行匹配。
                    </li>
                    <li> <b>期间</b> - 如果第一个要素在第二个要素的期间内，则对要素进行匹配。
                    </li>
                    <li> <b>包含</b> - 如果第一个要素包含第二个要素，则对要素进行匹配。
                    </li>
                    <li> <b>相等</b> - 如果第一个要素等于第二个要素，则对要素进行匹配。
                    </li>
                    <li> <b>结束</b> - 如果第一个要素是第二个要素的结尾，则对要素进行匹配。
                    </li>
                    <li> <b>之后结束</b> - 如果第二个要素是第一个要素的结尾，则对要素进行匹配。
                    </li>
                    <li> <b>开始</b> - 如果第一个要素是第二个要素的开始，则对要素进行匹配。
                    </li>
                    <li> <b>之后开始</b> - 如果第二个要素是第一个要素的开始，则对要素进行匹配。
                    </li>
                    <li> <b>相交</b> - 如果时间完全相交， 则会对要素进行匹配。
                    </li>
                    <li> <b>邻近</b> - 如果要素在指定时间上互相接近，则会对这些要素进行连接。
                    </li>
                    <li> <b>近前</b> - 如果第一个要素位于第二个要素之前并且在指定时间内，则将对要素进行连接。
                    </li>
                    <li> <b>近后</b> - 如果第一个要素在第二个要素之后并且在指定时间内，则将对要素进行连接。
                    </li>
                </ul>
                
            </p>
        </div>
    </div>
    <div id="nearTemporal">
        <div><h2></h2></div>
        <hr/>
        <div>
            
            <p>指定应用于时间邻近关系的时间半径。时间邻近关系包括 <b>邻近</b>、 <b>近前</b>和 <b>近后</b>。
            </p>
            <p>例如，如果您拥有划船事故图层和飓风 GPS 轨迹图层，您可以在空间（1 千米）和时间（5 小时）上查找飓风轨迹指定距离内的划船事故。将生成发生的空间和时间均十分接近的连接到飓风的划船事故。
            </p>
        </div>
    </div>
    <div id="attributeRelationship">
        <div><h2>选择要匹配的字段</h2></div>
        <hr/>
        <div>
            <p>将一个图层中的字段值与另一图层中的字段值进行匹配。
            </p>
            <p>例如，如果您有一个全县住宅地址地理图层（包括  <i>ZIP</i> 字段）和一个按邮政编码分类的健康人口统计表格数据集（名为 <i>HEALTHZIP</i> 的字段），则可通过对 <i>ZIP</i> 字段和 <i>HEALTHZIP</i> 字段进行匹配，连接健康数据集与住宅数据。这将生成包含相应健康数据的住宅图层。
            </p>
        </div>
    </div>
    <div id="summaryFields">
        <div><h2>添加统计数据（可选）</h2></div>
        <hr/>
        <div>
            <p>如果将连接操作设置为 <b>一对一连接</b>，则计算连接要素的统计数据。默认情况下，将计算所有统计数据。
            </p>
            <p>可以计算汇总的要素的统计数据。可以根据数值字段计算以下内容： 
                <ul>
                    <li>计数 - 计算非空值的数目。此项可用于数值字段或字符串。[null, 0, 2] 的计数为 2。
                    </li>
                    <li>总和 - 字段内数值的总和。[null, null, 3] 的总和为 3。
                    </li>
                    <li>平均值 - 数值的平均值。[0, 2, null] 的平均值为 1。
                    </li>
                    <li>最小值 - 数值字段的最小值。[0, 2, null] 的最小值为 0。
                    </li>
                    <li>最大值 - 数值字段的最大值。[0, 2, null] 的最大值为 2。
                    </li>
                    <li>范围 - 数值字段的范围。其计算方法为最大值减去最小值。[0, null, 1] 的范围为 1。[null, 4] 的范围为 0。
                    </li>
                    <li>方差 - 轨迹中数值字段内数值的方差。[1] 的方差为空。[null, 1,0,1,1] 的方差为 0.25。
                    </li>
                    <li>标准差 - 数值字段的标准差。[1] 的标准差为空。[null, 1,0,1,1] 的标准差为 0.5。
                    </li>
                </ul>
                
            </p>
            <p>可以根据字符串字段计算以下内容：
                <ul>
                    <li>计数 - 非空字符串的数目。
                    </li>
                    <li>任意 - 该统计数据是指定字段中字符串值的随机样本。
                    </li>
                </ul>
                所有统计数据均根据非空值计算而得。生成的图层将包含一个针对每个计算而得的统计数据的新字段。通过选择一个属性和统计数据可添加任意数量的统计数据。
            </p>
            <p>所有统计数据均根据非空值计算而得。生成的图层将包含一个针对每个计算而得的统计数据的新字段。可通过选择一个属性和统计数据添加任意数量的统计数据。
            </p>
        </div>
    </div>
    <div id="joinCondition">
        <div><h2>构建连接要素所依据的表达式(可选)</h2></div>
        <hr/>
        <div>
            <p>将条件应用到指定字段。将仅连接带有符合这些条件的字段的要素。
            </p>
            <p>例如，如果只想向  <i>health_spending</i> 大于 <i>income</i> 20% 的要素的数据集应用连接，请使用第一个数据集（要连接到的数据集要素）中的字段 <i>health_spending</i> 和第二个数据集（要连接的数据集）中的字段 <i>income</i>，应用连接条件 <code>$target[&quot;health_spending&quot;] &gt; ($join[&quot;income&quot;] * .20)</code>。
            </p>
            <p>可通过使用表达式计算器来应用连接条件。
            </p>
        </div>
    </div>
    <div id="dataStore">
        <div><h2>选择数据存储</h2></div>
        <hr/>
        <div>
            <p>GeoAnalytics 结果存储在数据存储中并显示为  Portal for ArcGIS 中的要素图层。大多数情况下，结果应存储在时空数据存储中（此为默认设置）。某些情况下，将结果存储在关系数据存储也是一个很好的选择。下列内容说明了您可能需要将结果存储在关系数据存储中的原因： 
                <ul>
                    <li>可在门户到门户协作中应用结果。
                    </li>
                    <li>可启用结果的同步功能。
                    </li>
                </ul>
                
            </p>
            <p>如果您希望您的 GeoAnalytics 结果增加并希望利用时空大数据存储功能处理大量数据，则您不应使用关系数据存储。
            </p>
        </div>
    </div>
    <div id="outputName">
        <div><h2>结果图层名称</h2></div>
        <hr/>
        <div>
            <p> 要创建的图层的名称。如果您要写入 ArcGIS Data Store，则您的结果将保存在<b>我的内容</b>并添加到地图中。如果您要写入大数据文件共享，则您的结果将存储于大数据文件共享中，并添加到其清单。结果将不会添加到地图中。默认名称基于工具名称以及输入图层名称。如果该图层已存在，将无法使用该工具。
            </p>
            <p>如果写入  ArcGIS Data Store（关系或时空大数据存储），可以使用<b>将结果保存在</b>下拉框指定 <b>我的内容</b>中的文件夹的名称，结果将保存到该文件夹中。
            </p>
        </div>
    </div>
</div>
</html>
