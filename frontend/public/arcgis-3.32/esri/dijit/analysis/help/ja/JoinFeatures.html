<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title></title>
    <link rel="Stylesheet" href="../css/analysis.css" />
    <script type="text/javascript">
        function init() {
            if (window.location.hash) {
                var parentDiv, nodes, i, helpInfo, helpId, helpInfoArr, helpEnvFilter, envContent, hideEnvClass, hideNodes;
                helpInfo = window.location.hash.substring(1);
                    if(helpInfo.indexOf("-")) {
                        helpInfoArr = helpInfo.split("-");
                        helpId = helpInfoArr[0];
                        helpEnvFilter = helpInfoArr[1];
                    }
                    else {
                        helpId = helpInfo;
                    }
                parentDiv = document.getElementById("topics");
                nodes = parentDiv.children;
                    hideEnvClass = (helpEnvFilter === "OnlineOnly"? "PortalOnly": "OnlineOnly");
                    if(document.getElementsByClassName) {
                        hideNodes = document.getElementsByClassName(hideEnvClass);
                    }
                    else {
                        hideNodes = document.querySelectorAll(hideEnvClass);
                    }
                for(i=0; i < nodes.length; i++) {
                    if(nodes[i].id !== helpId) {
                        nodes[i].style.display ="none";
                    }
                    }
                    for(i=0; i < hideNodes.length; i++) {
                        hideNodes[i].style.display ="none";
                    }
                }
            }
    </script>
</head>
<body onload="init()">
<div id="topics">
    <div id="toolDescription" class="smallsize">
        <h2>フィーチャの結合 (Join Features)</h2><p/>
        <h2><img src="../images/GUID-2230E8B8-8956-475C-9C65-68A92359BB48-web.png" alt="フィーチャの結合"></h2>
        <hr/>
    <p>[フィーチャの結合] は 2 つのレイヤーを扱い、空間および属性リレーションシップに基づいて、一方のフィーチャの属性を他方のフィーチャに結合します。このツールは、指定の結合条件を満たしているすべての入力フィーチャを特定し、結合レイヤーをターゲット レイヤーに追加します。
    </p>
    <p>[フィーチャの結合] は、ポイント、ライン、エリア、およびテーブルに適用できます。空間結合では、データにジオメトリがあることが必要です。
    </p>
    <p> <b>[現在のマップ範囲を使用]</b> がオンの場合、現在のマップ範囲に表示されるフィーチャだけが解析されます。オフの場合、ターゲット レイヤーと結合レイヤーのすべてのフィーチャが、現在のマップ範囲内になくても解析されます。
    </p>
    </div>
    <!--Parameter divs for each param-->
    <div id="targetLayer">
        <div><h2>ターゲット レイヤーの選択</h2></div>
        <hr/>
        <div>
            <p>このターゲット レイヤーのテーブルに、結合レイヤーの属性が追加されます。
            </p>
            <p>マップからレイヤーを選択するだけでなく、ドロップダウン リストの下部にある  <b>[解析レイヤーの選択]</b> を選択することもできます。このオプションを選択すると、解析で使用するためにさまざまなソースのデータセットを参照して選択できるギャラリーが開きます。 
            </p> 
        </div>
    </div>
    <div id="joinLayer">
        <div><h2>ターゲット レイヤーに結合するレイヤーの選択</h2></div>
        <hr/>
        <div>
            <p>この結合レイヤーの属性が、ターゲット レイヤーに追加されます。
            </p>
            <p>マップからレイヤーを選択するだけでなく、ドロップダウン リストの下部にある  <b>[解析レイヤーの選択]</b> を選択することもできます。このオプションを選択すると、解析で使用するためにさまざまなソースのデータセットを参照して選択できるギャラリーが開きます。 
            </p>
        </div>
    </div>
    <div id="joinType">
        <div><h2>結合タイプの選択</h2></div>
        <hr/>
        <div>
            <p>空間結合、属性結合、またはその 2 つを組み合わせて適用できます。
                <ul>
                    <li> <b>空間</b> - 指定の空間リレーションシップを使用してフィーチャを結合します。これには、両方のレイヤーにジオメトリがあることが必要です。
                    </li>
                    <li> <b>属性</b> - 一致するフィールドに基づいてフィーチャを結合します。
                    </li>
                </ul>
                
            </p>
            <p>
            </p>
        </div>
    </div>
    <div id="spatialRelationship">
        <div><h2>空間リレーションシップの選択</h2></div>
        <hr/>
        <div>
            <p>フィーチャが互いに結合しているかどうかを判断する空間リレーションシップ。使用可能なリレーションシップは、入力フィーチャとして使用されているジオメトリのタイプ (ポイント、ライン、エリア) によって決まります。使用可能なリレーションシップは次のとおりです。
                <ul>
                    <li> <b>正確に一致する</b>: ターゲット レイヤー内のフィーチャは、そのフィーチャが結合レイヤー内のフィーチャと正確に一致する場合に一致します。
                    </li>
                    <li> <b>インターセクト</b>: ターゲット レイヤー内のフィーチャは、そのフィーチャが結合レイヤー内のフィーチャと交差している場合に一致します。
                    </li>
                    <li> <b>完全に含む</b>: フィーチャは、ターゲット レイヤーのフィーチャが結合レイヤーのフィーチャを完全に含む場合に一致します。
                    </li>
                    <li> <b>完全に含まれる</b>: フィーチャは、ターゲット レイヤーのフィーチャが結合レイヤーのフィーチャ内に完全にある場合に一致します。
                    </li>
                    <li> <b>一定距離内の</b>: ターゲット レイヤー内のフィーチャは、そのフィーチャが結合レイヤー内のフィーチャから指定の距離内にある場合に一致します。
                    </li>
                </ul>
                
            </p>
        </div>
    </div>
    <div id="attributeRelationship">
        <div><h2>属性結合</h2></div>
        <hr/>
        <div>
            <p>フィーチャが互いに結合しているかどうかを判断する属性リレーションシップ。フィーチャは、結合レイヤーのフィールド値がターゲット レイヤーのフィールド値に等しい場合に一致します。
            </p>
            <p>たとえば、郡全体での居住地住所の区画レイヤー ( <i>ZIP</i> フィールドを含む) と、郵便番号別の医療人口統計の表形式データセット (フィールド名は <i>HEALTHZIP</i>) があるとします。 <i>ZIP</i> フィールドと <i>HEALTHZIP</i> フィールドを照合して、医療データセットを居住地データに結合できます。この結果として、居住地とそれに対応する医療データのレイヤーが生成されます。
            </p>
        </div>
    </div>
    <div id="joinOperation">
        <div><h2>結合方法の選択</h2></div>
        <hr/>
        <div>
            <p>結合レイヤーの複数のフィーチャがターゲット レイヤーに対して同じリレーションシップを持っていることが判明した場合に、ターゲット レイヤーと結合レイヤーの結合をどのように処理するかを決定します。次の 2 つの結合方法の中から選択できます。
                <ul>
                    <li> <b>[1 対 1 の結合]</b> - このオプションを選択すると、ターゲット レイヤー内のフィーチャが、結合レイヤー内の 1 つのフィーチャに結合されます。フィーチャの結合方法は、 <b>[統計情報の追加]</b> パラメーターまたは <b>[保持するレコードの定義]</b> パラメーターによって決定されます。 <b>[統計情報の追加]</b> パラメーターを使用する場合、ターゲット レイヤー内のフィーチャごとに、すべての一致する結合後のフィーチャが集計されます。デフォルトでは、結合後のフィーチャの個数が加算されます。 <b>[保持するレコードの定義]</b> を使用する場合、最初に一致するレコードを保持するか (デフォルト)、条件式に基づいて一致するレコードを維持するかを選択できます。条件式は、数値フィールド (最大/最小のレコード用のオプション) または日付フィールド (最も新しい/古いレコード用のオプション) を使用できます。
                    </li>
                    <li> <b>1 対多の結合</b> - このオプションを選択すると、一致するフィーチャがすべてターゲット レイヤーに結合されます。結果レイヤーには、ターゲット フィーチャの複数レコードが含まれます。
                    </li>
                </ul>
                
            </p>
            <p>たとえば、ファーマーズ マーケットから 5 キロメートル以内にあるスーパーマーケットを検索するとします。この場合、結合するレイヤーには、ファーマーズ マーケットを表す 1 つのフィーチャがあり、結合フィーチャは、年間総売上などの属性のある現地の食料品店を表します。 <b>[フィーチャの結合]</b> ツールを使用すると、5 軒の食料品店が指定の条件を満たしていることがわかります。 <b>[1 対多の結合]</b> の結合方法を指定した場合、結果として 5 つのフィーチャが生成され、各行はファーマーズ マーケットとスーパーマーケットを表します。 <b>[1 対 1 の結合]</b> リレーションシップを指定し、統計情報を選択した場合は、ファーマーズ マーケット、スーパーマーケットの集計情報 (軒数 (5) など)、その他のオプションの統計情報 (年間総売上など) を表す 1 つのフィーチャが生成されます。
            </p>
        </div>
    </div>
    <div id="summaryFields">
        <div><h2>統計情報の追加 (オプション)</h2></div>
        <hr/>
        <div>
            <p>数値フィールドに対して  <b>[1 対 1 の結合]</b> オプションを選択した場合は、結合したフィーチャの統計情報を集計および計算できます。デフォルトでは、一致する結合フィーチャの数が計算されて結果レイヤーに追加されます。統計情報を追加しない場合は、結合レイヤー内の最初に一致するフィーチャが、ターゲット レイヤー内の最初に一致するフィーチャに結合されます。次の 1 つまたは複数を計算できます。
            </p>
            <ul>
                <li>合計
                </li>
                <li>最小値
                </li>
                <li>最大値
                </li>
                <li>平均値
                </li>
                <li>標準偏差
                </li>
            </ul>
            
            <p> 
            </p>
        </div>
    </div>
    <div id="outputName">
        <div><h2>結果レイヤー名</h2></div>
        <hr/>
        <div>
            <p>これは、 <b>[マイ コンテンツ]</b> で作成され、マップに追加されるレイヤーの名前です。デフォルト名は、ツール名と入力レイヤー名に基づいて設定されます。レイヤー名がすでに存在する場合は、別の名前を指定するよう求められます。
            </p>
            <p> <b>[出力の保存先]</b> ドロップダウン メニューを使用して、結果を保存する <b>[マイ コンテンツ]</b> 内のフォルダーの名前を指定できます。
            </p>
        </div>
    </div>
    <div id="isView">
        <div><h2>結果をホスト フィーチャ レイヤー ビューとして作成</h2></div>
        <hr/>
        <div>
            <p> 結果をホスト フィーチャ レイヤー ビューとして作成すると、ソース データが変更されたときにデータを常に最新の状態に更新することができます。結合が含まれるホスト フィーチャ レイヤー ビューは読み取り専用になり、解析とストレージのクレジットは消費しません。
            </p>
            <p>次のすべての条件を満たす場合、解析結果からホスト フィーチャ レイヤー ビューを作成できます。
                <ul>
                    <li>両方のレイヤーの所有者。
                    </li>
                    <li>両方のレイヤーがホスト フィーチャ レイヤー。
                    </li>
                    <li>属性ベースの結合を実行している。
                    </li>
                </ul>
                
            </p>
        </div>
    </div>
</div>
</html>
