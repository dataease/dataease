<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">

</head>

<body style="height: 100%;">
  <div id="link"></div>
</body>
<script>
  function getQueryVariable(variable) {
    let query = window.location.search.substring(1)
    let vars = []
    if (!query) {
      query = document.cookie
      vars = query.split(';')
    } else {
      vars = query.split('&')
    }
    for (var i = 0; i < vars.length; i++) {
      const pair = vars[i].split('=')
      if (pair[0].trim() === variable) {
        return pair[1]
      }
    }
    return (false)
  }
  const shot = getQueryVariable('shot')
  if (shot) {
    const panelId = getQueryVariable('panelId')
    const baseUrl = window.location.pathname.replace('link.html', '')
    const shoturl = baseUrl + "#/previewScreenShot/" + panelId + "/true"
    window.location.href = shoturl
  } else {
    const link = getQueryVariable('link')
    const user = getQueryVariable('user')
    const terminal = getQueryVariable('terminal')
    const attachParams = getQueryVariable('attachParams')
    const fromLink = getQueryVariable('fromLink')
    const ticket = getQueryVariable('ticket')
    const baseUrl = window.location.pathname.replace('link.html', '')
    let url = baseUrl + "#/delink?link=" + encodeURIComponent(link)
    if (terminal) {
      url += '&terminal=' + terminal
    }
    if (user) {
      url += '&user=' + encodeURIComponent(user)
    }
    if (attachParams) {
      url += '&attachParams=' + encodeURIComponent(attachParams)
    }
    if (fromLink) {
      url += '&fromLink=' + fromLink
    }
    if (ticket) {
      url += '&ticket=' + ticket
    }
    window.location.href = url
  }
  
</script>

</html>
